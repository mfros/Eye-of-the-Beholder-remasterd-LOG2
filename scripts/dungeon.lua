-- This file has been generated by Dungeon Editor 2.2.4

--- level 1 ---

newMap{
	name = "Clerik Barracks",
	width = 32,
	height = 32,
	levelCoord = {0,0,-2},
	ambientTrack = "fortress",
	tiles = {
		"castle_floor",
		"castle_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,1,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,1,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,1,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,2,1,2,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,2,2,2,2,2,1,2,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,1,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,1,1,2,1,1,1,1,2,2,2,2,2,2,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,1,1,1,2,2,1,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,1,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,1,1,2,1,1,1,2,2,
	2,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,2,2,2,1,2,1,2,1,2,1,2,2,
	2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,
	2,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,2,2,2,2,2,1,2,1,2,2,2,2,
	2,1,2,2,2,2,1,2,2,2,2,2,2,1,2,1,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,
	2,2,1,1,1,1,1,2,2,1,2,1,2,1,2,1,2,2,1,1,2,2,2,2,2,1,2,1,2,2,2,2,
	2,2,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,2,2,1,1,1,1,1,2,2,
	1,1,1,2,2,2,2,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,1,2,2,1,2,1,2,1,2,2,
	2,2,1,1,1,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,2,1,1,1,1,2,1,1,1,2,2,
	2,2,2,2,2,1,1,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,1,1,1,1,1,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,1,1,1,1,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	1,1,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("castle_stairs_up",3,27,1,0,"castle_stairs_up_2")
spawn("castle_stairs_down",9,12,2,0,"castle_stairs_down_7")
castle_stairs_down_7.stairs:setTeleportTarget(3,22,3,0)
spawn("castle_door_portcullis",11,10,3,0,"castle_door_portcullis_1")
spawn("castle_ceiling_light",10,10,3,0,"castle_ceiling_light_31")
spawn("castle_ceiling_light",9,10,2,0,"castle_ceiling_light_32")
spawn("castle_ceiling_light",7,12,2,0,"castle_ceiling_light_33")
spawn("castle_ceiling_light",7,10,2,0,"castle_ceiling_light_34")
spawn("castle_ceiling_light",7,14,2,0,"castle_ceiling_light_35")
spawn("castle_ceiling_light",6,15,3,0,"castle_ceiling_light_36")
spawn("castle_ceiling_light",7,16,0,0,"castle_ceiling_light_37")
spawn("castle_ceiling_light",4,15,1,0,"castle_ceiling_light_38")
spawn("castle_ceiling_light",2,15,3,0,"castle_ceiling_light_39")
spawn("castle_ceiling_light",2,18,3,0,"castle_ceiling_light_40")
spawn("castle_ceiling_light",4,20,1,0,"castle_ceiling_light_41")
spawn("castle_ceiling_light",4,25,1,0,"castle_ceiling_light_42")
spawn("castle_ceiling_light",6,27,1,0,"castle_ceiling_light_43")
spawn("castle_ceiling_light",3,29,2,0,"castle_ceiling_light_44")
spawn("castle_ceiling_light",10,23,3,0,"castle_ceiling_light_45")
spawn("castle_ceiling_light",13,25,1,0,"castle_ceiling_light_46")
spawn("castle_ceiling_light",18,21,0,0,"castle_ceiling_light_47")
spawn("castle_ceiling_light",15,19,3,0,"castle_ceiling_light_48")
spawn("castle_ceiling_light",15,16,3,0,"castle_ceiling_light_49")
spawn("castle_ceiling_light",14,12,0,0,"castle_ceiling_light_50")
spawn("castle_ceiling_light",13,12,2,0,"castle_ceiling_light_51")
spawn("castle_ceiling_light",13,29,0,0,"castle_ceiling_light_52")
spawn("castle_ceiling_light",9,27,0,0,"castle_ceiling_light_53")
spawn("castle_ceiling_light",8,23,3,0,"castle_ceiling_light_54")
spawn("castle_ceiling_light",7,24,1,0,"castle_ceiling_light_55")
spawn("castle_ceiling_light",6,22,0,0,"castle_ceiling_light_56")
spawn("castle_ceiling_light",24,21,2,0,"castle_ceiling_light_57")
spawn("castle_ceiling_light",25,18,2,0,"castle_ceiling_light_58")
spawn("castle_ceiling_light",23,18,0,0,"castle_ceiling_light_59")
spawn("castle_ceiling_light",24,17,1,0,"castle_ceiling_light_60")
spawn("castle_ceiling_light",24,19,1,0,"castle_ceiling_light_61")
spawn("castle_ceiling_light",28,17,2,0,"castle_ceiling_light_62")
spawn("castle_ceiling_light",27,18,3,0,"castle_ceiling_light_63")
spawn("castle_ceiling_light",29,18,1,0,"castle_ceiling_light_64")
spawn("castle_ceiling_light",28,19,0,0,"castle_ceiling_light_65")
spawn("castle_ceiling_light",27,20,0,0,"castle_ceiling_light_66")
spawn("castle_ceiling_light",27,22,2,0,"castle_ceiling_light_67")
spawn("castle_ceiling_light",25,23,0,0,"castle_ceiling_light_68")
spawn("castle_ceiling_light",28,23,2,0,"castle_ceiling_light_69")
spawn("castle_ceiling_light",28,25,1,0,"castle_ceiling_light_70")
spawn("castle_ceiling_light",27,24,0,0,"castle_ceiling_light_71")
spawn("castle_ceiling_light",29,24,3,0,"castle_ceiling_light_72")
spawn("castle_ceiling_light",24,25,3,0,"castle_ceiling_light_73")
spawn("castle_ceiling_light",22,25,3,0,"castle_ceiling_light_74")
spawn("castle_ceiling_light",21,21,3,0,"castle_ceiling_light_75")
spawn("castle_ceiling_light",26,8,3,0,"castle_ceiling_light_76")
spawn("castle_ceiling_light",25,8,0,0,"castle_ceiling_light_77")
spawn("castle_ceiling_light",24,8,0,0,"castle_ceiling_light_78")
spawn("castle_ceiling_light",25,6,2,0,"castle_ceiling_light_79")
spawn("castle_ceiling_light",23,5,3,0,"castle_ceiling_light_80")
spawn("castle_ceiling_light",25,3,3,0,"castle_ceiling_light_81")
spawn("castle_ceiling_light",27,1,1,0,"castle_ceiling_light_82")
spawn("castle_ceiling_light",27,3,2,0,"castle_ceiling_light_83")
spawn("castle_ceiling_light",28,2,1,0,"castle_ceiling_light_84")
spawn("castle_ceiling_light",30,2,0,0,"castle_ceiling_light_85")
spawn("castle_ceiling_light",30,1,1,0,"castle_ceiling_light_86")
spawn("castle_ceiling_light",30,3,0,0,"castle_ceiling_light_87")
spawn("castle_ceiling_light",17,13,1,0,"castle_ceiling_light_88")
spawn("castle_ceiling_light",11,11,0,0,"castle_ceiling_light_89")
spawn("nexus_lock",10,10,2,0,"nexus_lock_1")
nexus_lock_1.stand:disable()
nexus_lock_1.lock:setOpenedBy("nexus_key")
nexus_lock_1.lock:addConnector("onActivate", "castle_door_portcullis_1", "open")
spawn("nexus_lock",7,13,1,0,"nexus_lock_2")
nexus_lock_2.stand:disable()
nexus_lock_2.lock:setOpenedBy("nexus_key")
nexus_lock_2.lock:addConnector("onActivate", "castle_door_portcullis_2", "open")
spawn("castle_door_portcullis",7,13,2,0,"castle_door_portcullis_2")
spawn("castle_door_wood",14,12,0,0,"castle_door_wood_1")
spawn("castle_door_portcullis",15,13,1,0,"castle_door_portcullis_3")
castle_door_portcullis_3.door:setPullChain(true)
spawn("castle_door_portcullis",16,16,3,0,"castle_door_portcullis_4")
spawn("castle_door_portcullis",16,18,3,0,"castle_door_portcullis_5")
castle_door_portcullis_5.door:setPullChain(true)
spawn("castle_door_portcullis",16,20,1,0,"castle_door_portcullis_6")
spawn("castle_door_portcullis",13,23,0,0,"castle_door_portcullis_7")
spawn("castle_door_portcullis",11,24,0,0,"castle_door_portcullis_8")
spawn("castle_door_portcullis",9,24,0,0,"castle_door_portcullis_9")
spawn("castle_door_portcullis",7,24,0,0,"castle_door_portcullis_10")
castle_door_portcullis_10.door:setPullChain(true)
spawn("castle_door_portcullis",3,20,1,0,"castle_door_portcullis_11")
castle_door_portcullis_11.door:setPullChain(true)
spawn("castle_door_portcullis",4,18,3,0,"castle_door_portcullis_12")
spawn("castle_door_portcullis",3,16,1,0,"castle_door_portcullis_13")
castle_door_portcullis_13.door:setPullChain(true)
spawn("castle_outside_stairs_up",0,30,1,0,"castle_outside_stairs_up_2")
spawn("castle_outside_stairs_up",0,24,1,0,"castle_outside_stairs_up_3")
spawn("castle_stairs_up",28,6,3,0,"castle_stairs_up_3")
spawn("castle_stairs_up",22,23,0,0,"castle_stairs_up_4")
spawn("lock_ornate",13,12,0,0,"lock_ornate_1")
lock_ornate_1.lock:setOpenedBy("lock_pick")
lock_ornate_1.lock:addConnector("onActivate", "castle_door_wood_1", "open")
spawn("castle_alcove",14,10,0,0,"castle_alcove_1")
spawn("scroll_invisibility",14,10,0,0,"scroll_invisibility_1")
castle_alcove_1.surface:addItem(scroll_invisibility_1.item)
spawn("lock_pick",14,10,0,0,"lock_pick_2")
castle_alcove_1.surface:addItem(lock_pick_2.item)
spawn("castle_alcove",18,12,0,0,"castle_alcove_2")
spawn("arquebus",18,12,0,0,"arquebus_1")
castle_alcove_2.surface:addItem(arquebus_1.item)
spawn("pellet_box",18,12,0,0,"pellet_box_2")
pellet_box_2.item:setStackSize(40)
castle_alcove_2.surface:addItem(pellet_box_2.item)
spawn("shaman_staff",18,12,0,0,"shaman_staff_1")
castle_alcove_2.surface:addItem(shaman_staff_1.item)
spawn("lock_round",15,15,1,0,"lock_round_1")
lock_round_1.lock:setOpenedBy("lock_pick")
lock_round_1.lock:addConnector("onActivate", "castle_door_portcullis_4", "open")
spawn("lock_round",12,23,0,0,"lock_round_2")
lock_round_2.lock:setOpenedBy("lock_pick")
lock_round_2.lock:addConnector("onActivate", "castle_door_portcullis_7", "open")
spawn("pitroot_bread",13,21,2,0,"pitroot_bread_1")
spawn("crystal_flower",13,21,0,0,"crystal_flower_1")
spawn("blooddrop_cap",11,25,0,0,"blooddrop_cap_6")
spawn("blackmoss",1,17,3,0,"blackmoss_1")
spawn("blackmoss",1,18,2,0,"blackmoss_2")
spawn("blackmoss",1,14,0,0,"blackmoss_3")
spawn("blackmoss",7,15,1,0,"blackmoss_4")
spawn("ice_guardian",7,13,0,0,"ice_guardian_1")
ice_guardian_1.monster:setHealth(200)
spawn("ice_guardian",17,15,2,0,"ice_guardian_2")
ice_guardian_2.monster:setHealth(200)
spawn("lock_pick",17,15,2,0,"lock_pick_3")
ice_guardian_2.monster:addItem(lock_pick_3.item)
spawn("nexus_key",17,15,2,0,"nexus_key_2")
ice_guardian_2.monster:addItem(nexus_key_2.item)
spawn("ice_guardian",17,16,0,0,"ice_guardian_3")
ice_guardian_3.monster:setHealth(200)
spawn("lock_round",12,23,2,0,"lock_round_3")
lock_round_3.lock:setOpenedBy("lock_pick")
lock_round_3.lock:addConnector("onActivate", "castle_door_portcullis_8", "open")
spawn("archmage_hat",11,24,1,0,"archmage_hat_1")
spawn("lock_pick",11,24,3,0,"lock_pick_4")
spawn("chitin_mail",11,25,2,0,"chitin_mail_1")
spawn("ice_guardian",7,25,0,0,"ice_guardian_4")
ice_guardian_4.monster:setHealth(200)
spawn("floor_trigger",7,23,1,0,"floor_trigger_4")
floor_trigger_4.floortrigger:setTriggeredByParty(true)
floor_trigger_4.floortrigger:setTriggeredByMonster(false)
floor_trigger_4.floortrigger:setTriggeredByItem(false)
floor_trigger_4.floortrigger:setTriggeredByDigging(false)
floor_trigger_4.floortrigger:setDisableSelf(false)
floor_trigger_4.floortrigger:addConnector("onActivate", "castle_door_portcullis_10", "open")
spawn("lock_round",6,23,3,0,"lock_round_4")
lock_round_4.lock:setOpenedBy("lock_pick")
lock_round_4.lock:addConnector("onActivate", "castle_door_wood_2", "open")
spawn("teleporter",2,22,0,0,"teleporter_7")
teleporter_7.teleporter:setSpin("none")
teleporter_7.teleporter:setTriggeredByParty(true)
teleporter_7.teleporter:setTriggeredByMonster(true)
teleporter_7.teleporter:setTriggeredByItem(true)
teleporter_7.teleporter:setTriggeredBySpell(true)
spawn("castle_door_portcullis",2,22,1,0,"castle_door_portcullis_14")
spawn("castle_door_wood",6,22,3,0,"castle_door_wood_2")
spawn("castle_secret_door",13,25,2,0,"castle_secret_door_7")
spawn("barrel_crate_block",13,25,0,0,"barrel_crate_block_8")
spawn("castle_wall_button",13,25,1,0,"castle_wall_button_2")
castle_wall_button_2.button:setDisableSelf(false)
castle_wall_button_2.button:addConnector("onActivate", "castle_secret_door_7", "open")
spawn("teleporter",12,29,0,0,"teleporter_8")
teleporter_8.teleporter:setTeleportTarget(2,12,12,0)
teleporter_8.teleporter:setSpin("none")
teleporter_8.teleporter:setTriggeredByParty(true)
teleporter_8.teleporter:setTriggeredByMonster(true)
teleporter_8.teleporter:setTriggeredByItem(true)
teleporter_8.teleporter:setTriggeredBySpell(true)
spawn("teleporter",14,29,1,0,"teleporter_9")
teleporter_9.teleporter:setTeleportTarget(1,14,29,0)
teleporter_9.teleporter:setSpin("none")
teleporter_9.teleporter:setTriggeredByParty(true)
teleporter_9.teleporter:setTriggeredByMonster(true)
teleporter_9.teleporter:setTriggeredByItem(true)
teleporter_9.teleporter:setTriggeredBySpell(true)
spawn("teleporter",13,30,2,0,"teleporter_10")
teleporter_10.teleporter:setTeleportTarget(1,13,30,0)
teleporter_10.teleporter:setSpin("none")
teleporter_10.teleporter:setTriggeredByParty(true)
teleporter_10.teleporter:setTriggeredByMonster(true)
teleporter_10.teleporter:setTriggeredByItem(true)
teleporter_10.teleporter:setTriggeredBySpell(true)
spawn("castle_secret_door",7,27,1,0,"castle_secret_door_8")
spawn("castle_secret_door",2,30,0,0,"castle_secret_door_9")
spawn("secret",13,26,1,0,"secret_3")
spawn("floor_trigger",13,26,2,0,"floor_trigger_5")
floor_trigger_5.floortrigger:setTriggeredByParty(true)
floor_trigger_5.floortrigger:setTriggeredByMonster(true)
floor_trigger_5.floortrigger:setTriggeredByItem(true)
floor_trigger_5.floortrigger:setTriggeredByDigging(false)
floor_trigger_5.floortrigger:setDisableSelf(false)
floor_trigger_5.floortrigger:addConnector("onActivate", "secret_3", "activate")
spawn("tome_energy",11,24,2,0,"tome_energy_2")
spawn("castle_wall_lever",4,23,1,0,"castle_wall_lever_1")
castle_wall_lever_1.lever:setDisableSelf(false)
castle_wall_lever_1.lever:addConnector("onActivate", "castle_door_wood_2", "close")
castle_wall_lever_1.lever:addConnector("onDeactivate", "castle_door_wood_2", "open")
spawn("castle_alcove",4,22,0,0,"castle_alcove_3")
spawn("scroll_light",4,22,0,0,"scroll_light_1")
castle_alcove_3.surface:addItem(scroll_light_1.item)
spawn("nexus_key",4,22,0,0,"nexus_key_3")
castle_alcove_3.surface:addItem(nexus_key_3.item)
spawn("castle_ceiling_light",3,23,1,0,"castle_ceiling_light_98")
spawn("castle_ceiling_light",4,22,0,0,"castle_ceiling_light_99")
spawn("castle_wall_text",16,20,2,0,"castle_wall_text_2")
castle_wall_text_2.walltext:setWallText("No shall pass without mark of Darckmoon")
spawn("castle_door_wood",6,20,2,0,"castle_door_wood_4")
spawn("nexus_lock",6,21,1,0,"nexus_lock_3")
nexus_lock_3.stand:disable()
nexus_lock_3.lock:setOpenedBy("nexus_key")
nexus_lock_3.lock:addConnector("onActivate", "castle_door_wood_4", "open")
spawn("ice_lizard_steak",1,21,0,0,"ice_lizard_steak_1")
spawn("ice_lizard_steak",1,21,1,0,"ice_lizard_steak_2")
spawn("ice_lizard_steak",1,21,2,0,"ice_lizard_steak_3")
spawn("ice_lizard_steak",1,21,3,0,"ice_lizard_steak_4")
spawn("ice_guardian",3,18,1,0,"ice_guardian_5")
ice_guardian_5.monster:setHealth(150)
spawn("ice_guardian",2,18,1,0,"ice_guardian_6")
ice_guardian_6.monster:setHealth(200)
spawn("floor_trigger",4,18,1,0,"floor_trigger_6")
floor_trigger_6.floortrigger:setTriggeredByParty(true)
floor_trigger_6.floortrigger:setTriggeredByMonster(true)
floor_trigger_6.floortrigger:setTriggeredByItem(true)
floor_trigger_6.floortrigger:setTriggeredByDigging(false)
floor_trigger_6.floortrigger:setDisableSelf(false)
floor_trigger_6.floortrigger:addConnector("onActivate", "castle_door_portcullis_12", "open")
spawn("castle_door_wood",15,21,2,0,"castle_door_wood_5")
spawn("nexus_lock",15,21,1,0,"nexus_lock_4")
nexus_lock_4.stand:disable()
nexus_lock_4.lock:setOpenedBy("nexus_key")
nexus_lock_4.lock:addConnector("onActivate", "castle_door_wood_5", "open")

--- level 2 ---

newMap{
	name = "Soft flor room",
	width = 32,
	height = 32,
	levelCoord = {1,0,-2},
	ambientTrack = "tomb",
	tiles = {
		"tomb_floor",
		"tomb_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,1,2,2,1,1,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("tomb_wall_lantern",14,11,0,0,"tomb_wall_lantern_1")
spawn("tomb_wall_lantern",12,11,0,0,"tomb_wall_lantern_2")
spawn("tomb_wall_lantern",12,13,2,0,"tomb_wall_lantern_3")
spawn("tomb_wall_lantern",14,14,0,0,"tomb_wall_lantern_4")
spawn("tomb_wall_lantern",16,12,1,0,"tomb_wall_lantern_5")
spawn("tomb_wall_lantern",18,10,3,0,"tomb_wall_lantern_6")
spawn("tomb_wall_lantern",18,8,1,0,"tomb_wall_lantern_7")
spawn("tomb_wall_lantern",17,7,3,0,"tomb_wall_lantern_8")
spawn("tomb_wall_lantern",12,8,3,0,"tomb_wall_lantern_9")
spawn("tomb_wall_lantern",11,6,0,0,"tomb_wall_lantern_10")
spawn("tomb_wall_lantern",9,6,0,0,"tomb_wall_lantern_11")
spawn("tomb_wall_lantern",6,6,1,0,"tomb_wall_lantern_12")
spawn("tomb_wall_lantern",7,7,2,0,"tomb_wall_lantern_13")
spawn("tomb_wall_lantern",9,7,3,0,"tomb_wall_lantern_14")
spawn("tomb_wall_lantern",8,14,3,0,"tomb_wall_lantern_15")
spawn("tomb_wall_lantern",9,13,2,0,"tomb_wall_lantern_16")
spawn("tomb_wall_lantern",10,12,0,0,"tomb_wall_lantern_17")
spawn("tomb_wall_lantern",10,14,2,0,"tomb_wall_lantern_18")
spawn("tomb_wall_lantern",8,16,1,0,"tomb_wall_lantern_19")
spawn("tomb_wall_lantern",7,16,1,0,"tomb_wall_lantern_20")
spawn("tomb_wall_lantern",8,18,2,0,"tomb_wall_lantern_21")
spawn("tomb_wall_lantern",9,17,1,0,"tomb_wall_lantern_22")
spawn("tomb_wall_lantern",19,18,0,0,"tomb_wall_lantern_23")
spawn("tomb_wall_lantern",17,17,2,0,"tomb_wall_lantern_24")
spawn("tomb_wall_lantern",18,16,3,0,"tomb_wall_lantern_25")
spawn("tomb_wall_lantern",19,16,0,0,"tomb_wall_lantern_26")
spawn("tomb_wall_lantern",14,16,1,0,"tomb_wall_lantern_27")
spawn("tomb_wall_lantern",14,16,3,0,"tomb_wall_lantern_28")
spawn("tomb_wall_lantern",14,18,0,0,"tomb_wall_lantern_29")
spawn("nexus_key",12,13,1,0,"nexus_key_4")
spawn("tomb_door_stone",15,12,3,0,"tomb_door_stone_1")
tomb_door_stone_1.door:setDoorState("open")
spawn("tomb_door_stone",13,11,0,0,"tomb_door_stone_2")
tomb_door_stone_2.door:setDoorState("open")
spawn("tomb_door_stone",12,12,3,0,"tomb_door_stone_3")
tomb_door_stone_3.door:setDoorState("open")
spawn("tomb_door_stone",13,14,0,0,"tomb_door_stone_4")
tomb_door_stone_4.door:setDoorState("open")
spawn("floor_trigger",15,12,2,0,"floor_trigger_7")
floor_trigger_7.floortrigger:setTriggeredByParty(true)
floor_trigger_7.floortrigger:setTriggeredByMonster(true)
floor_trigger_7.floortrigger:setTriggeredByItem(true)
floor_trigger_7.floortrigger:setTriggeredByDigging(false)
floor_trigger_7.floortrigger:setDisableSelf(false)
floor_trigger_7.floortrigger:addConnector("onActivate", "tomb_door_stone_1", "close")
spawn("floor_trigger",13,10,3,0,"floor_trigger_8")
floor_trigger_8.floortrigger:setTriggeredByParty(true)
floor_trigger_8.floortrigger:setTriggeredByMonster(true)
floor_trigger_8.floortrigger:setTriggeredByItem(true)
floor_trigger_8.floortrigger:setTriggeredByDigging(false)
floor_trigger_8.floortrigger:setDisableSelf(false)
floor_trigger_8.floortrigger:addConnector("onActivate", "tomb_door_stone_2", "close")
spawn("floor_trigger",11,12,3,0,"floor_trigger_9")
floor_trigger_9.floortrigger:setTriggeredByParty(true)
floor_trigger_9.floortrigger:setTriggeredByMonster(true)
floor_trigger_9.floortrigger:setTriggeredByItem(true)
floor_trigger_9.floortrigger:setTriggeredByDigging(false)
floor_trigger_9.floortrigger:setDisableSelf(false)
floor_trigger_9.floortrigger:addConnector("onActivate", "tomb_door_stone_3", "close")
spawn("floor_trigger",13,14,3,0,"floor_trigger_10")
floor_trigger_10.floortrigger:setTriggeredByParty(true)
floor_trigger_10.floortrigger:setTriggeredByMonster(true)
floor_trigger_10.floortrigger:setTriggeredByItem(true)
floor_trigger_10.floortrigger:setTriggeredByDigging(false)
floor_trigger_10.floortrigger:setDisableSelf(false)
floor_trigger_10.floortrigger:addConnector("onActivate", "tomb_door_stone_4", "close")
spawn("tomb_alcove",17,11,0,0,"tomb_alcove_1")
spawn("crystal_boots",17,11,0,0,"crystal_boots_1")
tomb_alcove_1.surface:addItem(crystal_boots_1.item)
spawn("crystal_amulet",17,11,0,0,"crystal_amulet_1")
tomb_alcove_1.surface:addItem(crystal_amulet_1.item)
spawn("crystal_cuirass",17,11,0,0,"crystal_cuirass_1")
tomb_alcove_1.surface:addItem(crystal_cuirass_1.item)
spawn("crystal_gauntlets",17,11,0,0,"crystal_gauntlets_1")
tomb_alcove_1.surface:addItem(crystal_gauntlets_1.item)
spawn("crystal_greaves",17,11,0,0,"crystal_greaves_1")
tomb_alcove_1.surface:addItem(crystal_greaves_1.item)
spawn("crystal_helmet",17,11,0,0,"crystal_helmet_1")
tomb_alcove_1.surface:addItem(crystal_helmet_1.item)
spawn("crystal_shield",17,11,0,0,"crystal_shield_1")
tomb_alcove_1.surface:addItem(crystal_shield_1.item)
spawn("tomb_alcove",17,7,0,0,"tomb_alcove_2")
spawn("wizards_virge",17,7,0,0,"wizards_virge_1")
tomb_alcove_2.surface:addItem(wizards_virge_1.item)
spawn("tomb_alcove",17,8,3,0,"tomb_alcove_3")
spawn("tomb_alcove",17,8,2,0,"tomb_alcove_4")
spawn("tomb_alcove",18,7,1,0,"tomb_alcove_5")
spawn("rogue_gloves",18,7,1,0,"rogue_gloves_1")
tomb_alcove_5.surface:addItem(rogue_gloves_1.item)
spawn("rogue_boots",18,7,1,0,"rogue_boots_1")
tomb_alcove_5.surface:addItem(rogue_boots_1.item)
spawn("rogue_hood",18,7,1,0,"rogue_hood_1")
tomb_alcove_5.surface:addItem(rogue_hood_1.item)
spawn("rogue_pants",18,7,1,0,"rogue_pants_2")
tomb_alcove_5.surface:addItem(rogue_pants_2.item)
spawn("rogue_vest",18,7,1,0,"rogue_vest_2")
tomb_alcove_5.surface:addItem(rogue_vest_2.item)
spawn("tomb_alcove",18,9,1,0,"tomb_alcove_6")
spawn("meteor_boots",18,9,1,0,"meteor_boots_1")
tomb_alcove_6.surface:addItem(meteor_boots_1.item)
spawn("meteor_cuirass",18,9,1,0,"meteor_cuirass_1")
tomb_alcove_6.surface:addItem(meteor_cuirass_1.item)
spawn("meteor_cuisse",18,9,1,0,"meteor_cuisse_1")
tomb_alcove_6.surface:addItem(meteor_cuisse_1.item)
spawn("meteor_gauntlets",18,9,1,0,"meteor_gauntlets_1")
tomb_alcove_6.surface:addItem(meteor_gauntlets_1.item)
spawn("meteor_hammer",18,9,1,0,"meteor_hammer_1")
tomb_alcove_6.surface:addItem(meteor_hammer_1.item)
spawn("meteor_helmet",18,9,1,0,"meteor_helmet_1")
tomb_alcove_6.surface:addItem(meteor_helmet_1.item)
spawn("meteor_shield",18,9,1,0,"meteor_shield_1")
tomb_alcove_6.surface:addItem(meteor_shield_1.item)
spawn("uggardian",7,6,1,0,"uggardian_1")
uggardian_1.monster:setAIState("guard")
uggardian_1.monster:setLevel(5)
uggardian_1.monster:setHealth(1175)
spawn("uggardian",7,7,1,0,"uggardian_2")
uggardian_2.monster:setAIState("guard")
uggardian_2.monster:setLevel(5)
uggardian_2.monster:setHealth(1175)
spawn("wall_button",11,7,2,0,"wall_button_1")
wall_button_1.button:setDisableSelf(false)
wall_button_1.button:addConnector("onActivate", "teleporter_11", "activate")
wall_button_1.button:addConnector("onActivate", "teleporter_8", "deactivate")
wall_button_1.button:addConnector("onActivate", "teleporter_10", "deactivate")
wall_button_1.button:addConnector("onActivate", "teleporter_9", "deactivate")
spawn("teleporter",12,7,1,0,"teleporter_11")
teleporter_11.teleporter:setTeleportTarget(1,12,29,0)
teleporter_11.teleporter:setSpin("none")
teleporter_11.teleporter:setTriggeredByParty(true)
teleporter_11.teleporter:setTriggeredByMonster(true)
teleporter_11.teleporter:setTriggeredByItem(true)
teleporter_11.teleporter:setTriggeredBySpell(true)
teleporter_11.controller:setInitialState("deactivate")
spawn("tomb_wall_text",10,7,1,0,"tomb_wall_text_1")
tomb_wall_text_1.walltext:setWallText("Exit")
spawn("fire_trap_rune",13,10,0,0,"fire_trap_rune_1")
fire_trap_rune_1.floortrigger:setTriggeredByParty(true)
fire_trap_rune_1.floortrigger:setTriggeredByMonster(false)
fire_trap_rune_1.floortrigger:setTriggeredByItem(false)
fire_trap_rune_1.floortrigger:setTriggeredByDigging(false)
fire_trap_rune_1.floortrigger:setDisableSelf(false)
spawn("morning_star",9,18,2,0,"morning_star_1")
spawn("ice_lizard_steak",8,18,3,0,"ice_lizard_steak_5")
spawn("ice_lizard_steak",8,18,2,0,"ice_lizard_steak_6")
spawn("ice_lizard_steak",8,18,1,0,"ice_lizard_steak_7")
spawn("ice_lizard_steak",8,18,0,0,"ice_lizard_steak_8")
spawn("tomb_alcove",8,15,3,0,"tomb_alcove_7")
spawn("ice_lizard_steak",8,15,3,0,"ice_lizard_steak_9")
tomb_alcove_7.surface:addItem(ice_lizard_steak_9.item)
spawn("ice_lizard_steak",8,15,3,0,"ice_lizard_steak_10")
tomb_alcove_7.surface:addItem(ice_lizard_steak_10.item)
spawn("ice_lizard_steak",8,15,3,0,"ice_lizard_steak_11")
tomb_alcove_7.surface:addItem(ice_lizard_steak_11.item)
spawn("ice_lizard_steak",8,15,3,0,"ice_lizard_steak_12")
tomb_alcove_7.surface:addItem(ice_lizard_steak_12.item)
spawn("wall_button",8,15,1,0,"wall_button_2")
wall_button_2.button:setDisableSelf(false)
wall_button_2.button:addConnector("onActivate", "teleporter_12", "activate")
wall_button_2.button:addConnector("onActivate", "teleporter_8", "deactivate")
wall_button_2.button:addConnector("onActivate", "teleporter_10", "deactivate")
wall_button_2.button:addConnector("onActivate", "teleporter_9", "deactivate")
spawn("teleporter",8,14,2,0,"teleporter_12")
teleporter_12.teleporter:setTeleportTarget(1,12,29,0)
teleporter_12.teleporter:setSpin("none")
teleporter_12.teleporter:setTriggeredByParty(true)
teleporter_12.teleporter:setTriggeredByMonster(true)
teleporter_12.teleporter:setTriggeredByItem(true)
teleporter_12.teleporter:setTriggeredBySpell(true)
teleporter_12.controller:setInitialState("deactivate")
spawn("wall_button",13,15,2,0,"wall_button_3")
wall_button_3.button:setDisableSelf(false)
wall_button_3.button:addConnector("onActivate", "teleporter_13", "activate")
wall_button_3.button:addConnector("onActivate", "teleporter_8", "deactivate")
wall_button_3.button:addConnector("onActivate", "teleporter_10", "deactivate")
wall_button_3.button:addConnector("onActivate", "teleporter_9", "deactivate")
spawn("teleporter",13,14,0,0,"teleporter_13")
teleporter_13.teleporter:setTeleportTarget(1,12,29,0)
teleporter_13.teleporter:setSpin("none")
teleporter_13.teleporter:setTriggeredByParty(true)
teleporter_13.teleporter:setTriggeredByMonster(true)
teleporter_13.teleporter:setTriggeredByItem(true)
teleporter_13.teleporter:setTriggeredBySpell(true)
teleporter_13.controller:setInitialState("deactivate")
spawn("tomb_wall_text",13,14,1,0,"tomb_wall_text_2")
tomb_wall_text_2.walltext:setWallText("Emergency supplies")
spawn("stormseed_orb",19,16,0,0,"stormseed_orb_1")
spawn("potion_greater_healing",19,17,1,0,"potion_greater_healing_2")
potion_greater_healing_2.item:setStackSize(2)
spawn("potion_vitality",19,16,1,0,"potion_vitality_1")
spawn("potion_healing",18,16,0,0,"potion_healing_1")

--- level 3 ---

newMap{
	name = "Temple Darkmoon",
	width = 32,
	height = 32,
	levelCoord = {0,0,-1},
	ambientTrack = "fortress",
	tiles = {
		"castle_floor",
		"castle_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,1,1,1,1,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,1,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,1,2,2,2,1,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,1,2,2,1,1,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,1,1,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("castle_secret_door",25,11,0,0,"castle_secret_door_1")
spawn("castle_secret_door",24,6,2,0,"castle_secret_door_2")
spawn("castle_secret_door",24,6,0,0,"castle_secret_door_3")
spawn("castle_secret_door",24,4,2,0,"castle_secret_door_4")
spawn("castle_secret_door",24,3,2,0,"castle_secret_door_5")
spawn("castle_secret_door",21,6,1,0,"castle_secret_door_6")
spawn("castle_ceiling_light",25,11,0,0,"castle_ceiling_light_1")
spawn("castle_ceiling_light",25,10,0,0,"castle_ceiling_light_2")
spawn("castle_ceiling_light",25,8,0,0,"castle_ceiling_light_3")
spawn("castle_ceiling_light",24,7,0,0,"castle_ceiling_light_4")
spawn("castle_ceiling_light",24,4,0,0,"castle_ceiling_light_5")
spawn("castle_ceiling_light",24,5,2,0,"castle_ceiling_light_6")
spawn("castle_ceiling_light",24,6,1,0,"castle_ceiling_light_7")
spawn("castle_ceiling_light",24,3,1,0,"castle_ceiling_light_8")
spawn("castle_ceiling_light",25,3,3,0,"castle_ceiling_light_9")
spawn("castle_ceiling_light",26,3,2,0,"castle_ceiling_light_10")
spawn("castle_ceiling_light",27,3,3,0,"castle_ceiling_light_11")
spawn("castle_ceiling_light",24,8,2,0,"castle_ceiling_light_12")
spawn("castle_ceiling_light",22,8,1,0,"castle_ceiling_light_13")
spawn("castle_ceiling_light",22,10,0,0,"castle_ceiling_light_14")
spawn("castle_ceiling_light",22,5,2,0,"castle_ceiling_light_15")
spawn("castle_ceiling_light",22,3,0,0,"castle_ceiling_light_16")
spawn("castle_ceiling_light",21,6,3,0,"castle_ceiling_light_17")
spawn("castle_wall_button",22,8,3,0,"castle_wall_button_1")
castle_wall_button_1.button:setDisableSelf(false)
castle_wall_button_1.button:addConnector("onActivate", "castle_secret_door_6", "open")
spawn("teleporter",21,6,1,0,"teleporter_1")
teleporter_1.teleporter:setTeleportTarget(3,18,17,0)
teleporter_1.teleporter:setSpin("none")
teleporter_1.teleporter:setTriggeredByParty(true)
teleporter_1.teleporter:setTriggeredByMonster(true)
teleporter_1.teleporter:setTriggeredByItem(true)
teleporter_1.teleporter:setTriggeredBySpell(true)
spawn("castle_ceiling_light",16,16,2,0,"castle_ceiling_light_18")
spawn("castle_ceiling_light",18,16,2,0,"castle_ceiling_light_19")
spawn("castle_ceiling_light",20,16,2,0,"castle_ceiling_light_20")
spawn("castle_ceiling_light",18,14,2,0,"castle_ceiling_light_21")
spawn("castle_ceiling_light",15,17,2,0,"castle_ceiling_light_22")
spawn("castle_ceiling_light",21,17,2,0,"castle_ceiling_light_23")
spawn("castle_ceiling_light",16,16,1,0,"castle_ceiling_light_24")
spawn("castle_ceiling_light",15,15,1,0,"castle_ceiling_light_25")
spawn("castle_ceiling_light",17,15,1,0,"castle_ceiling_light_26")
spawn("castle_ceiling_light",19,15,1,0,"castle_ceiling_light_27")
spawn("castle_ceiling_light",21,15,3,0,"castle_ceiling_light_28")
spawn("castle_ceiling_light",17,17,3,0,"castle_ceiling_light_29")
spawn("castle_ceiling_light",19,17,1,0,"castle_ceiling_light_30")
spawn("healing_crystal",18,14,0,0,"healing_crystal_1")
spawn("teleporter",15,18,1,0,"teleporter_2")
teleporter_2.teleporter:setTeleportTarget(3,18,22,0)
teleporter_2.teleporter:setSpin("none")
teleporter_2.teleporter:setTriggeredByParty(true)
teleporter_2.teleporter:setTriggeredByMonster(true)
teleporter_2.teleporter:setTriggeredByItem(true)
teleporter_2.teleporter:setTriggeredBySpell(true)
spawn("teleporter",21,18,3,0,"teleporter_3")
teleporter_3.teleporter:setTeleportTarget(3,22,6,0)
teleporter_3.teleporter:setSpin("none")
teleporter_3.teleporter:setTriggeredByParty(true)
teleporter_3.teleporter:setTriggeredByMonster(true)
teleporter_3.teleporter:setTriggeredByItem(true)
teleporter_3.teleporter:setTriggeredBySpell(true)
spawn("castle_wall_02",15,15,0,0,"castle_wall_02_1")
spawn("castle_wall_01",16,15,0,0,"castle_wall_01_4")
spawn("castle_wall_01",17,15,0,0,"castle_wall_01_5")
spawn("castle_wall_02",18,14,3,0,"castle_wall_02_2")
spawn("castle_wall_02",18,14,0,0,"castle_wall_02_3")
spawn("castle_wall_01",18,14,1,0,"castle_wall_01_6")
spawn("castle_wall_03",19,15,0,0,"castle_wall_03_1")
spawn("castle_wall_01",20,15,0,0,"castle_wall_01_7")
spawn("castle_wall_02",21,15,0,0,"castle_wall_02_4")
spawn("castle_wall_03",21,15,1,0,"castle_wall_03_3")
spawn("castle_wall_03",21,16,1,0,"castle_wall_03_2")
spawn("castle_wall_01",21,17,1,0,"castle_wall_01_9")
spawn("castle_wall_01",15,15,3,0,"castle_wall_01_8")
spawn("castle_wall_01",15,16,3,0,"castle_wall_01_12")
spawn("castle_wall_01",15,17,3,0,"castle_wall_01_13")
spawn("castle_wall_01",15,18,3,0,"castle_wall_01_15")
spawn("castle_wall_01",15,18,2,0,"castle_wall_01_16")
spawn("castle_wall_02",15,18,1,0,"castle_wall_02_5")
spawn("castle_wall_01",16,17,2,0,"castle_wall_01_10")
spawn("castle_wall_01",17,17,2,0,"castle_wall_01_11")
spawn("castle_wall_01",18,17,2,0,"castle_wall_01_14")
spawn("castle_wall_01",19,17,2,0,"castle_wall_01_17")
spawn("castle_wall_01",20,17,2,0,"castle_wall_01_18")
spawn("castle_wall_01",21,18,2,0,"castle_wall_01_20")
spawn("castle_wall_01",21,18,3,0,"castle_wall_01_21")
spawn("castle_wall_01",21,18,1,0,"castle_wall_01_22")
spawn("castle_stairs_down",28,10,3,0,"castle_stairs_down_1")
castle_stairs_down_1.stairs:setTeleportTarget(3,19,12,0)
spawn("castle_stairs_down",22,11,2,0,"castle_stairs_down_2")
castle_stairs_down_2.stairs:setTeleportTarget(6,15,13,0)
spawn("castle_stairs_up",22,2,0,0,"castle_stairs_up_1")
castle_stairs_up_1.stairs:setTeleportTarget(1,9,11,0)
spawn("long_sword",25,11,1,0,"long_sword_1")
spawn("rotten_pitroot_bread",22,3,3,0,"rotten_pitroot_bread_3")
spawn("healing_crystal",18,25,1,0,"healing_crystal_2")
spawn("teleporter",15,21,3,0,"teleporter_5")
teleporter_5.teleporter:setTeleportTarget(3,22,6,0)
teleporter_5.teleporter:setSpin("none")
teleporter_5.teleporter:setTriggeredByParty(true)
teleporter_5.teleporter:setTriggeredByMonster(true)
teleporter_5.teleporter:setTriggeredByItem(true)
teleporter_5.teleporter:setTriggeredBySpell(true)
spawn("teleporter",21,21,1,0,"teleporter_6")
teleporter_6.teleporter:setTeleportTarget(3,18,17,0)
teleporter_6.teleporter:setSpin("none")
teleporter_6.teleporter:setTriggeredByParty(true)
teleporter_6.teleporter:setTriggeredByMonster(true)
teleporter_6.teleporter:setTriggeredByItem(true)
teleporter_6.teleporter:setTriggeredBySpell(true)
spawn("castle_ceiling_light",15,22,1,0,"castle_ceiling_light_90")
spawn("castle_ceiling_light",17,23,0,0,"castle_ceiling_light_91")
spawn("castle_ceiling_light",19,22,2,0,"castle_ceiling_light_92")
spawn("castle_ceiling_light",21,23,3,0,"castle_ceiling_light_93")
spawn("castle_ceiling_light",19,24,1,0,"castle_ceiling_light_94")
spawn("castle_ceiling_light",16,24,0,0,"castle_ceiling_light_95")
spawn("castle_ceiling_light",15,23,1,0,"castle_ceiling_light_96")
spawn("castle_ceiling_light",18,22,3,0,"castle_ceiling_light_97")
spawn("castle_pressure_plate",23,8,1,0,"castle_pressure_plate_1")
castle_pressure_plate_1.floortrigger:setTriggeredByParty(true)
castle_pressure_plate_1.floortrigger:setTriggeredByMonster(true)
castle_pressure_plate_1.floortrigger:setTriggeredByItem(true)
castle_pressure_plate_1.floortrigger:setTriggeredByDigging(false)
castle_pressure_plate_1.floortrigger:setDisableSelf(false)
castle_pressure_plate_1.floortrigger:addConnector("onActivate", "castle_entrance_door_1", "close")
castle_pressure_plate_1.floortrigger:addConnector("onActivate", "castle_secret_door_1", "open")
spawn("skeleton_archer",25,11,3,0,"skeleton_archer_1")
skeleton_archer_1.monster:setHealth(30)
spawn("castle_entrance_door",29,10,3,0,"castle_entrance_door_1")
castle_entrance_door_1.door:setDoorState("open")
spawn("castle_door_wood",23,8,1,0,"castle_door_wood_3")
castle_door_wood_3.door:setPullChain(true)

--- level 4 ---

newMap{
	name = "Forest",
	width = 32,
	height = 32,
	levelCoord = {-1,0,0},
	ambientTrack = "forest",
	tiles = {
		"forest_ground2",
		"forest_trees",
	}
}

loadLayer("ceiling_elevation", {
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,4,1,1,4,1,4,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,4,4,4,4,1,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,4,1,4,4,1,4,1,4,1,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,4,1,4,1,1,4,1,1,1,4,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,4,4,4,4,4,4,4,4,1,4,4,4,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,4,1,4,1,4,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,4,4,4,1,4,1,4,4,4,4,4,1,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,4,1,4,4,1,4,1,1,1,4,1,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,4,4,4,1,1,4,4,4,1,4,4,4,1,1,4,4,4,4,4,4,4,4,1,1,1,1,
	1,1,1,1,1,1,1,4,1,4,4,4,1,4,4,1,1,4,1,4,4,4,4,4,4,4,4,4,1,1,1,1,
	1,1,1,1,1,1,4,4,4,4,1,4,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,
	1,1,1,1,1,1,1,4,1,1,4,4,4,4,4,4,4,1,4,4,4,4,4,4,4,4,4,4,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,4,4,1,1,1,1,1,4,4,4,4,4,4,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
})

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,2,2,1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,1,1,1,2,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,1,2,1,1,2,1,2,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,2,1,2,2,1,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,1,1,1,2,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,2,1,2,1,2,2,2,2,2,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,2,1,1,2,1,2,2,2,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,1,1,2,2,1,1,1,2,1,1,1,2,2,1,1,1,1,1,1,1,1,2,2,2,2,
	2,2,2,2,2,2,2,1,2,1,1,1,2,1,1,2,2,1,2,1,1,1,1,1,1,1,1,1,2,2,2,2,
	2,2,2,2,2,2,1,1,1,1,2,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,
	2,2,2,2,2,2,2,1,2,2,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,1,2,2,2,2,2,1,1,1,1,1,1,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("forest_heightmap",31,0,3,0,"forest_heightmap_2")
spawn("forest_day_sky",30,0,1,0,"forest_day_sky_2")
spawn("castle_outside_stairs_up",19,15,1,0,"castle_outside_stairs_up_4")
castle_outside_stairs_up_4.stairs:setTeleportTarget(3,29,10,0)
spawn("castle_tower_tall_01",22,15,1,0,"castle_tower_tall_01_1")
spawn("castle_wall_outside_tall_01",19,16,3,0,"castle_wall_outside_tall_01_8")
spawn("castle_wall_outside_tall_01",19,17,0,0,"castle_wall_outside_tall_01_10")
spawn("castle_wall_outside_tall_01",20,17,0,0,"castle_wall_outside_tall_01_13")
spawn("castle_wall_outside_tall_01",21,17,0,0,"castle_wall_outside_tall_01_14")
spawn("castle_wall_outside_tall_01",22,17,3,0,"castle_wall_outside_tall_01_15")
spawn("castle_wall_outside_tall_01",19,14,3,0,"castle_wall_outside_tall_01_16")
spawn("castle_wall_outside_tall_01",20,13,3,0,"castle_wall_outside_tall_01_19")
spawn("castle_wall_outside_tall_01",20,13,0,0,"castle_wall_outside_tall_01_20")
spawn("castle_wall_outside_tall_01",21,12,2,0,"castle_wall_outside_tall_01_21")
spawn("castle_wall_outside_tall_01",22,12,2,0,"castle_wall_outside_tall_01_22")
spawn("forest_ruins_wall_01",14,17,0,0,"forest_ruins_wall_01_31")
spawn("forest_ruins_wall_01",15,16,3,0,"forest_ruins_wall_01_32")
spawn("forest_ruins_wall_01",15,16,0,0,"forest_ruins_wall_01_33")
spawn("forest_ruins_wall_01",16,16,3,0,"forest_ruins_wall_01_34")
spawn("forest_ruins_wall_01",16,17,0,0,"forest_ruins_wall_01_35")
spawn("forest_ruins_wall_01",16,16,1,0,"forest_ruins_wall_01_36")
spawn("forest_ruins_wall_01",12,17,0,0,"forest_ruins_wall_01_37")
spawn("forest_ruins_wall_01",11,17,0,0,"forest_ruins_wall_01_38")
spawn("forest_ruins_wall_01",10,17,0,0,"forest_ruins_wall_01_39")
spawn("forest_ruins_pillar_01",11,17,0,0,"forest_ruins_pillar_01_13")
spawn("forest_ruins_pillar_01",12,17,0,0,"forest_ruins_pillar_01_14")
spawn("forest_ruins_pillar_01",13,17,1,0,"forest_ruins_pillar_01_15")
spawn("forest_ruins_pillar_01",14,17,3,0,"forest_ruins_pillar_01_16")
spawn("forest_ruins_pillar_01",15,17,3,0,"forest_ruins_pillar_01_17")
spawn("forest_ruins_pillar_01",15,16,0,0,"forest_ruins_pillar_01_18")
spawn("forest_ruins_pillar_01",16,16,3,0,"forest_ruins_pillar_01_19")
spawn("forest_ruins_pillar_01",16,17,3,0,"forest_ruins_pillar_01_20")
spawn("forest_ruins_pillar_01",17,17,3,0,"forest_ruins_pillar_01_21")
spawn("forest_ruins_pillar_01",17,16,2,0,"forest_ruins_pillar_01_22")
spawn("forest_ruins_secret_door",13,16,2,0,"forest_ruins_secret_door_2")
spawn("forest_stairs_down",13,18,2,0,"forest_stairs_down_2")
spawn("forest_ruins_secret_button_big",16,16,3,0,"forest_ruins_secret_button_big_2")
forest_ruins_secret_button_big_2.button:setDisableSelf(false)
forest_ruins_secret_button_big_2.button:addConnector("onActivate", "forest_ruins_secret_door_2", "open")
spawn("forest_ruins_wall_01",15,17,3,0,"forest_ruins_wall_01_40")
spawn("forest_ruins_wall_01",14,17,3,0,"forest_ruins_wall_01_41")
spawn("forest_ruins_pillar_01",14,18,0,0,"forest_ruins_pillar_01_23")
spawn("forest_ruins_pillar_01",13,18,2,0,"forest_ruins_pillar_01_24")
spawn("forest_ruins_wall_01",12,17,1,0,"forest_ruins_wall_01_42")
spawn("fjeld_warg",15,9,3,0,"fjeld_warg_1")
fjeld_warg_1.monster:setHealth(50)
spawn("fjeld_warg",13,11,3,0,"fjeld_warg_5")
fjeld_warg_5.monster:setHealth(50)
spawn("fjeld_warg",17,9,2,0,"fjeld_warg_7")
fjeld_warg_7.monster:setHealth(50)
spawn("fjeld_warg",8,15,2,0,"fjeld_warg_8")
fjeld_warg_8.monster:setHealth(50)
spawn("chest",6,6,1,0,"chest_1")
spawn("bone_club",6,6,1,0,"bone_club_1")
chest_1.surface:addItem(bone_club_1.item)
spawn("mortar",6,6,1,0,"mortar_1")
chest_1.surface:addItem(mortar_1.item)
spawn("peasant_breeches",6,6,1,0,"peasant_breeches_1")
chest_1.surface:addItem(peasant_breeches_1.item)
spawn("peasant_cap",6,6,1,0,"peasant_cap_1")
chest_1.surface:addItem(peasant_cap_1.item)
spawn("peasant_tunic",6,6,1,0,"peasant_tunic_1")
chest_1.surface:addItem(peasant_tunic_1.item)
spawn("shoes",6,6,1,0,"shoes_1")
chest_1.surface:addItem(shoes_1.item)
spawn("torn_breeches",6,6,1,0,"torn_breeches_1")
chest_1.surface:addItem(torn_breeches_1.item)
spawn("xafi_khakis",6,6,1,0,"xafi_khakis_1")
chest_1.surface:addItem(xafi_khakis_1.item)
spawn("xafi_robe",6,6,1,0,"xafi_robe_1")
chest_1.surface:addItem(xafi_robe_1.item)
spawn("xafi_shemagh",6,6,1,0,"xafi_shemagh_1")
chest_1.surface:addItem(xafi_shemagh_1.item)
spawn("torch",6,6,1,0,"torch_1")
chest_1.surface:addItem(torch_1.item)
spawn("sandals",6,6,1,0,"sandals_1")
chest_1.surface:addItem(sandals_1.item)
spawn("tattered_shirt",6,6,1,0,"tattered_shirt_1")
chest_1.surface:addItem(tattered_shirt_1.item)
spawn("shoes",6,6,1,0,"shoes_2")
chest_1.surface:addItem(shoes_2.item)
spawn("castle_wall_text",18,16,1,0,"castle_wall_text_1")
castle_wall_text_1.walltext:setWallText("Temple of Darkmoon")
spawn("tombstone",11,5,0,0,"tombstone_7")
tombstone_7.walltext:setWallText("")
spawn("tombstone",12,7,2,0,"tombstone_8")
tombstone_8.walltext:setWallText("")
spawn("tombstone",13,5,0,0,"tombstone_9")
tombstone_9.walltext:setWallText("")
spawn("tombstone",16,8,2,0,"tombstone_10")
tombstone_10.walltext:setWallText("")
spawn("tombstone",17,7,1,0,"tombstone_11")
tombstone_11.walltext:setWallText("")
spawn("tombstone",15,5,0,0,"tombstone_12")
tombstone_12.walltext:setWallText("")
spawn("branch",8,6,2,0,"branch_2")
spawn("rock",10,7,1,0,"rock_1")
spawn("throwing_knife",11,9,0,0,"throwing_knife_1")
spawn("blooddrop_cap",4,9,0,0,"blooddrop_cap_7")
spawn("blooddrop_cap",7,16,1,0,"blooddrop_cap_8")
spawn("blooddrop_cap",13,17,1,0,"blooddrop_cap_9")
spawn("blooddrop_cap",16,16,1,0,"blooddrop_cap_10")
spawn("blooddrop_cap",18,12,1,0,"blooddrop_cap_11")
spawn("blooddrop_cap",19,10,1,0,"blooddrop_cap_12")
spawn("blooddrop_cap",16,6,0,0,"blooddrop_cap_13")
spawn("blooddrop_cap",13,5,3,0,"blooddrop_cap_14")
spawn("blooddrop_cap",11,6,2,0,"blooddrop_cap_15")
spawn("blooddrop_cap",11,12,1,0,"blooddrop_cap_16")
spawn("arrow",11,5,1,0,"arrow_4")
arrow_4.item:setStackSize(2)
spawn("shovel",15,6,3,0,"shovel_1")
spawn("rock",17,10,1,0,"rock_11")
spawn("forest_ruins_wall_01",0,5,3,0,"forest_ruins_wall_01_1")
spawn("forest_ruins_wall_01",0,6,3,0,"forest_ruins_wall_01_2")
spawn("forest_ruins_wall_01",0,7,3,0,"forest_ruins_wall_01_3")
spawn("forest_ruins_wall_01",0,8,3,0,"forest_ruins_wall_01_4")
spawn("forest_ruins_wall_01",0,9,3,0,"forest_ruins_wall_01_5")
spawn("forest_ruins_wall_01",0,10,3,0,"forest_ruins_wall_01_6")
spawn("forest_ruins_wall_01",0,11,3,0,"forest_ruins_wall_01_7")
spawn("forest_ruins_wall_01",0,12,3,0,"forest_ruins_wall_01_8")
spawn("forest_ruins_wall_01",0,13,3,0,"forest_ruins_wall_01_9")
spawn("forest_ruins_wall_01",0,14,3,0,"forest_ruins_wall_01_10")
spawn("forest_ruins_wall_01",0,15,3,0,"forest_ruins_wall_01_11")
spawn("forest_ruins_wall_01",0,16,3,0,"forest_ruins_wall_01_12")
spawn("forest_ruins_pillar_01",0,7,0,0,"forest_ruins_pillar_01_1")
spawn("forest_ruins_pillar_01",0,6,3,0,"forest_ruins_pillar_01_2")
spawn("forest_ruins_pillar_01",0,5,0,0,"forest_ruins_pillar_01_3")
spawn("forest_ruins_pillar_01",0,8,3,0,"forest_ruins_pillar_01_4")
spawn("forest_ruins_pillar_01",0,9,1,0,"forest_ruins_pillar_01_5")
spawn("forest_ruins_pillar_01",0,10,3,0,"forest_ruins_pillar_01_6")
spawn("forest_ruins_pillar_01",0,11,3,0,"forest_ruins_pillar_01_7")
spawn("forest_ruins_pillar_01",0,12,3,0,"forest_ruins_pillar_01_8")
spawn("forest_ruins_pillar_01",0,13,0,0,"forest_ruins_pillar_01_9")
spawn("forest_ruins_pillar_01",0,14,3,0,"forest_ruins_pillar_01_10")
spawn("forest_ruins_pillar_01",0,15,1,0,"forest_ruins_pillar_01_11")
spawn("forest_ruins_pillar_01",0,16,2,0,"forest_ruins_pillar_01_12")
spawn("forest_ruins_pillar_01",0,17,2,0,"forest_ruins_pillar_01_25")
spawn("castle_wall_outside_tall_01",19,14,0,0,"castle_wall_outside_tall_01_1")
spawn("castle_wall_outside_tall_01",21,12,2,0,"castle_wall_outside_tall_01_2")
spawn("castle_wall_outside_tall_01",23,12,2,0,"castle_wall_outside_tall_01_3")
spawn("starting_location",7,6,1,0,"starting_location_1")

--- level 5 ---

newMap{
	name = "secret",
	width = 32,
	height = 32,
	levelCoord = {-1,1,1},
	ambientTrack = "dungeon",
	tiles = {
		"dungeon_floor",
		"dungeon_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,1,1,1,1,1,1,2,2,2,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("dungeon_stairs_up",3,1,0,0,"dungeon_stairs_up_1")
dungeon_stairs_up_1.stairs:setTeleportTarget(3,14,13,0)
spawn("torch_holder",6,2,2,0,"torch_holder_1")
torch_holder_1.controller:setHasTorch(true)
spawn("torch_holder",9,3,2,0,"torch_holder_2")
torch_holder_2.controller:setHasTorch(true)
spawn("torch_holder",14,2,0,0,"torch_holder_3")
torch_holder_3.controller:setHasTorch(true)
spawn("torch_holder",15,3,1,0,"torch_holder_4")
torch_holder_4.controller:setHasTorch(true)
spawn("battle_axe",15,2,1,0,"battle_axe_1")
spawn("secret",4,2,0,0,"secret_1")
spawn("floor_trigger",4,2,2,0,"floor_trigger_1")
floor_trigger_1.floortrigger:setTriggeredByParty(true)
floor_trigger_1.floortrigger:setTriggeredByMonster(true)
floor_trigger_1.floortrigger:setTriggeredByItem(true)
floor_trigger_1.floortrigger:setTriggeredByDigging(false)
floor_trigger_1.floortrigger:setDisableSelf(false)
floor_trigger_1.floortrigger:addConnector("onActivate", "secret_1", "activate")
spawn("rogue_pants",15,2,1,0,"rogue_pants_1")
spawn("rogue_vest",15,2,3,0,"rogue_vest_1")

--- level 6 ---

newMap{
	name = "Underground level 1",
	width = 32,
	height = 32,
	levelCoord = {0,0,1},
	ambientTrack = "catacomb",
	tiles = {
		"catacomb_floor",
		"dungeon_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,1,1,2,2,2,1,1,1,1,2,2,1,1,1,1,1,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,2,1,1,1,2,2,1,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,1,1,2,1,2,2,1,1,1,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,1,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,1,1,1,1,1,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,1,2,2,2,2,1,1,1,1,2,2,2,2,
	2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,2,1,2,2,2,2,
	2,2,1,2,2,2,1,1,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,
	2,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,2,2,2,1,2,2,2,2,
	2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,
	2,2,2,2,2,2,1,2,2,2,1,2,2,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,2,2,2,2,
	2,2,2,2,2,2,1,2,2,2,1,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("dungeon_stairs_up",15,12,0,0,"dungeon_stairs_up_2")
dungeon_stairs_up_2.stairs:setTeleportTarget(3,22,10,0)
spawn("catacomb_alcove_candle_01",16,15,1,0,"catacomb_alcove_candle_01_1")
spawn("catacomb_alcove_candle_02",14,15,3,0,"catacomb_alcove_candle_02_1")
spawn("catacomb_pillar_lantern_01",16,16,1,0,"catacomb_pillar_lantern_01_1")
spawn("catacomb_alcove_candle_02",18,14,0,0,"catacomb_alcove_candle_02_2")
spawn("catacomb_alcove_candle_02",13,14,0,0,"catacomb_alcove_candle_02_3")
spawn("catacomb_alcove_candle_02",11,13,3,0,"catacomb_alcove_candle_02_4")
spawn("catacomb_alcove_candle_02",11,12,1,0,"catacomb_alcove_candle_02_5")
spawn("catacomb_alcove_candle_02",15,13,3,0,"catacomb_alcove_candle_02_6")
spawn("catacomb_alcove_candle_02",10,9,3,0,"catacomb_alcove_candle_02_7")
spawn("catacomb_alcove_candle_02",12,9,2,0,"catacomb_alcove_candle_02_8")
spawn("catacomb_alcove_candle_02",10,6,3,0,"catacomb_alcove_candle_02_9")
spawn("catacomb_alcove_candle_02",10,2,1,0,"catacomb_alcove_candle_02_10")
spawn("catacomb_alcove_candle_02",9,2,3,0,"catacomb_alcove_candle_02_11")
spawn("catacomb_alcove_candle_02",13,4,2,0,"catacomb_alcove_candle_02_12")
spawn("catacomb_alcove_candle_02",17,3,1,0,"catacomb_alcove_candle_02_13")
spawn("catacomb_alcove_candle_02",17,5,2,0,"catacomb_alcove_candle_02_14")
spawn("catacomb_alcove_candle_02",15,6,3,0,"catacomb_alcove_candle_02_15")
spawn("catacomb_alcove_candle_02",17,7,2,0,"catacomb_alcove_candle_02_16")
spawn("catacomb_alcove_candle_02",20,8,3,0,"catacomb_alcove_candle_02_17")
spawn("catacomb_alcove_candle_02",20,10,2,0,"catacomb_alcove_candle_02_18")
spawn("catacomb_alcove_candle_02",21,6,1,0,"catacomb_alcove_candle_02_19")
spawn("catacomb_alcove_candle_02",20,5,3,0,"catacomb_alcove_candle_02_20")
spawn("catacomb_alcove_candle_02",20,3,3,0,"catacomb_alcove_candle_02_21")
spawn("catacomb_alcove_candle_02",23,3,0,0,"catacomb_alcove_candle_02_22")
spawn("catacomb_alcove_candle_02",23,3,2,0,"catacomb_alcove_candle_02_23")
spawn("catacomb_alcove_candle_02",20,1,0,0,"catacomb_alcove_candle_02_24")
spawn("catacomb_alcove_candle_02",2,16,3,0,"catacomb_alcove_candle_02_25")
spawn("catacomb_alcove_candle_02",3,19,2,0,"catacomb_alcove_candle_02_26")
spawn("catacomb_alcove_candle_02",5,19,0,0,"catacomb_alcove_candle_02_27")
spawn("catacomb_alcove_candle_02",8,19,0,0,"catacomb_alcove_candle_02_28")
spawn("catacomb_alcove_candle_02",19,16,3,0,"catacomb_alcove_candle_02_29")
spawn("catacomb_alcove_candle_02",23,18,0,0,"catacomb_alcove_candle_02_30")
spawn("catacomb_alcove_candle_02",20,18,2,0,"catacomb_alcove_candle_02_31")
spawn("catacomb_alcove_candle_02",24,20,0,0,"catacomb_alcove_candle_02_32")
spawn("catacomb_alcove_candle_02",27,19,3,0,"catacomb_alcove_candle_02_33")
spawn("catacomb_alcove_candle_02",11,22,1,0,"catacomb_alcove_candle_02_34")
spawn("catacomb_alcove_candle_02",7,22,1,0,"catacomb_alcove_candle_02_35")
spawn("catacomb_alcove_candle_02",7,24,1,0,"catacomb_alcove_candle_02_36")
spawn("catacomb_alcove_candle_02",5,24,3,0,"catacomb_alcove_candle_02_37")
spawn("catacomb_alcove_candle_02",5,22,3,0,"catacomb_alcove_candle_02_38")
spawn("catacomb_alcove_candle_02",9,22,3,0,"catacomb_alcove_candle_02_39")
spawn("catacomb_alcove_candle_02",9,24,3,0,"catacomb_alcove_candle_02_40")
spawn("catacomb_alcove_candle_02",11,24,1,0,"catacomb_alcove_candle_02_41")
spawn("catacomb_alcove_candle_02",15,21,2,0,"catacomb_alcove_candle_02_42")
spawn("catacomb_alcove_candle_02",18,21,2,0,"catacomb_alcove_candle_02_43")
spawn("catacomb_alcove_candle_02",17,21,0,0,"catacomb_alcove_candle_02_44")
spawn("catacomb_alcove_candle_02",13,20,3,0,"catacomb_alcove_candle_02_45")
spawn("catacomb_alcove_candle_02",21,21,2,0,"catacomb_alcove_candle_02_46")
spawn("catacomb_alcove_candle_02",23,20,3,0,"catacomb_alcove_candle_02_47")
spawn("catacomb_alcove_candle_02",20,21,0,0,"catacomb_alcove_candle_02_48")
spawn("catacomb_alcove_candle_02",13,19,0,0,"catacomb_alcove_candle_02_49")
spawn("dungeon_door_iron",14,14,3,0,"dungeon_door_iron_1")
dungeon_door_iron_1.door:setPullChain(true)
spawn("dungeon_door_iron",17,14,3,0,"dungeon_door_iron_2")
spawn("dungeon_secret_door",24,20,3,0,"dungeon_secret_door_1")
spawn("dungeon_secret_door",22,3,3,0,"dungeon_secret_door_2")
spawn("dungeon_secret_button_small",21,4,1,0,"dungeon_secret_button_small_1")
dungeon_secret_button_small_1.button:setDisableSelf(false)
dungeon_secret_button_small_1.button:addConnector("onActivate", "dungeon_secret_door_2", "open")
spawn("dungeon_secret_button_small",24,19,3,0,"dungeon_secret_button_small_2")
dungeon_secret_button_small_2.button:setDisableSelf(false)
dungeon_secret_button_small_2.button:addConnector("onActivate", "dungeon_secret_door_1", "open")
spawn("rock",16,15,1,0,"rock_4")
spawn("rock",14,15,1,0,"rock_5")
rock_5.item:setStackSize(2)
spawn("rock",13,14,1,0,"rock_6")
spawn("dungeon_pressure_plate_dirt_floor",11,10,3,0,"dungeon_pressure_plate_dirt_floor_1")
dungeon_pressure_plate_dirt_floor_1.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_dirt_floor_1.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_dirt_floor_1.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_dirt_floor_1.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_dirt_floor_1.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_dirt_floor_1.floortrigger:addConnector("onActivate", "dungeon_door_wooden_double_1", "open")
spawn("dungeon_door_wooden_double",11,8,2,0,"dungeon_door_wooden_double_1")
spawn("lever_ruins",9,5,3,0,"lever_ruins_1")
lever_ruins_1.lever:setDisableSelf(true)
lever_ruins_1.lever:addConnector("onActivate", "dungeon_door_iron_3", "open")
spawn("dungeon_door_iron",10,3,2,0,"dungeon_door_iron_3")
spawn("barrel_crate_block",9,1,2,0,"barrel_crate_block_1")
spawn("barrel_crate_block",10,1,2,0,"barrel_crate_block_2")
spawn("barrel_crate_block",9,2,1,0,"barrel_crate_block_3")
spawn("bread",9,1,3,0,"bread_1")
spawn("bread",10,1,0,0,"bread_2")
spawn("bread",9,2,3,0,"bread_3")
spawn("bread",10,1,1,0,"bread_4")
spawn("bread",9,1,3,0,"bread_5")
spawn("dungeon_pressure_plate_dirt_floor",18,7,3,0,"dungeon_pressure_plate_dirt_floor_2")
dungeon_pressure_plate_dirt_floor_2.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_dirt_floor_2.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_dirt_floor_2.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_dirt_floor_2.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_dirt_floor_2.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_dirt_floor_2.floortrigger:addConnector("onActivate", "dungeon_door_iron_4", "open")
spawn("dungeon_door_iron",20,7,3,0,"dungeon_door_iron_4")
spawn("dungeon_stairs_down",24,3,1,0,"dungeon_stairs_down_1")
dungeon_stairs_down_1.stairs:setTeleportTarget(7,2,9,0)
spawn("skeleton_trooper_pair",20,4,2,0,"skeleton_trooper_pair_1")
spawn("skeleton_trooper_pair",10,22,0,0,"skeleton_trooper_pair_2")
spawn("skeleton_trooper_pair",6,22,1,0,"skeleton_trooper_pair_3")
spawn("barrel_crate_block",20,1,1,0,"barrel_crate_block_4")
spawn("barrel_crate_block",21,1,2,0,"barrel_crate_block_5")
spawn("barrel_crate_block",20,2,2,0,"barrel_crate_block_6")
spawn("barrel_crate_block",21,2,3,0,"barrel_crate_block_7")
spawn("torch_everburning",15,13,0,0,"torch_everburning_1")
spawn("dungeon_alcove",9,1,3,0,"dungeon_alcove_1")
spawn("rotten_pitroot_bread",9,1,3,0,"rotten_pitroot_bread_1")
dungeon_alcove_1.surface:addItem(rotten_pitroot_bread_1.item)
spawn("rotten_pitroot_bread",9,1,3,0,"rotten_pitroot_bread_2")
dungeon_alcove_1.surface:addItem(rotten_pitroot_bread_2.item)
spawn("dungeon_alcove",10,1,0,0,"dungeon_alcove_2")
spawn("smoked_bass",10,1,0,0,"smoked_bass_1")
dungeon_alcove_2.surface:addItem(smoked_bass_1.item)
spawn("potion_greater_healing",21,1,1,0,"potion_greater_healing_1")
spawn("skeleton_trooper1",10,3,2,0,"skeleton_trooper1_1")
spawn("skeleton_trooper2",11,8,2,0,"skeleton_trooper2_1")
spawn("iron_key",11,8,2,0,"iron_key_1")
skeleton_trooper2_1.monster:addItem(iron_key_1.item)
spawn("dungeon_alcove",21,8,1,0,"dungeon_alcove_3")
spawn("iron_key",21,8,1,0,"iron_key_2")
dungeon_alcove_3.surface:addItem(iron_key_2.item)
spawn("dungeon_door_iron_barred",21,9,0,0,"dungeon_door_iron_barred_1")
spawn("lock",20,8,2,0,"lock_1")
lock_1.lock:setOpenedBy("iron_key")
lock_1.lock:addConnector("onActivate", "dungeon_door_iron_barred_1", "open")
spawn("dungeon_wall_text",21,9,1,0,"dungeon_wall_text_1")
dungeon_wall_text_1.walltext:setWallText("Insal\
\
")
spawn("floor_corpse",20,10,1,0,"floor_corpse_1")
spawn("potion_dexterity",20,10,3,0,"potion_dexterity_1")
spawn("lock_pick",20,10,0,0,"lock_pick_1")
lock_pick_1.item:setStackSize(3)
spawn("lock",16,14,0,0,"lock_2")
lock_2.lock:setOpenedBy("iron_key")
lock_2.lock:addConnector("onActivate", "dungeon_door_iron_2", "open")
spawn("rock",19,14,1,0,"rock_7")
rock_7.item:setStackSize(2)
spawn("dungeon_pit_trapdoor",19,18,1,0,"dungeon_pit_trapdoor_1")
dungeon_pit_trapdoor_1.pit:setState("open")
dungeon_pit_trapdoor_1.platform:disable()
spawn("lever_ruins",19,17,3,0,"lever_ruins_2")
lever_ruins_2.lever:setDisableSelf(false)
lever_ruins_2.lever:addConnector("onActivate", "dungeon_pit_trapdoor_1", "close")
lever_ruins_2.lever:addConnector("onDeactivate", "dungeon_pit_trapdoor_1", "open")
spawn("dungeon_pressure_plate_dirt_floor",20,18,1,0,"dungeon_pressure_plate_dirt_floor_3")
dungeon_pressure_plate_dirt_floor_3.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_dirt_floor_3.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_dirt_floor_3.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_dirt_floor_3.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_dirt_floor_3.floortrigger:setDisableSelf(true)
dungeon_pressure_plate_dirt_floor_3.floortrigger:addConnector("onActivate", "dungeon_pit_trapdoor_1", "open")
dungeon_pressure_plate_dirt_floor_3.floortrigger:addConnector("onActivate", "dungeon_door_iron_barred_2", "open")
spawn("dungeon_door_iron_barred",22,18,3,0,"dungeon_door_iron_barred_2")
spawn("lever_ruins",21,18,0,0,"lever_ruins_3")
lever_ruins_3.lever:setDisableSelf(false)
lever_ruins_3.lever:addConnector("onActivate", "dungeon_pit_trapdoor_1", "close")
lever_ruins_3.lever:addConnector("onDeactivate", "dungeon_pit_trapdoor_1", "open")
spawn("skeleton_trooper",21,21,1,0,"skeleton_trooper_1")
spawn("iron_key",21,21,1,0,"iron_key_4")
skeleton_trooper_1.monster:addItem(iron_key_4.item)
spawn("skeleton_trooper",20,21,0,0,"skeleton_trooper_2")
spawn("skeleton_trooper",19,21,0,0,"skeleton_trooper_3")
spawn("iron_key",19,21,0,0,"iron_key_3")
skeleton_trooper_3.monster:addItem(iron_key_3.item)
spawn("skeleton_trooper",18,21,0,0,"skeleton_trooper_4")
spawn("dungeon_door_portcullis",10,19,2,0,"dungeon_door_portcullis_1")
spawn("dungeon_door_portcullis",6,19,2,0,"dungeon_door_portcullis_2")
spawn("lock",11,19,2,0,"lock_3")
lock_3.lock:setOpenedBy("iron_key")
lock_3.lock:addConnector("onActivate", "dungeon_door_portcullis_1", "open")
spawn("lock",7,19,2,0,"lock_4")
lock_4.lock:setOpenedBy("iron_key")
lock_4.lock:addConnector("onActivate", "dungeon_door_portcullis_2", "open")
spawn("dungeon_stairs_down",2,15,0,0,"dungeon_stairs_down_2")
dungeon_stairs_down_2.stairs:setTeleportTarget(8,10,12,0)
spawn("terracotta_jars_block",10,24,0,0,"terracotta_jars_block_1")
spawn("terracotta_jars_block",6,24,0,0,"terracotta_jars_block_2")
spawn("dagger",10,24,1,0,"dagger_4")
spawn("lever",6,23,1,0,"lever_1")
lever_1.lever:setDisableSelf(false)
lever_1.lever:addConnector("onActivate", "castle_secret_door_2", "open")
spawn("dungeon_wall_text",6,23,3,0,"dungeon_wall_text_2")
dungeon_wall_text_2.walltext:setWallText("North")
spawn("flintlock",5,24,2,0,"flintlock_1")
spawn("pellet_box",6,24,2,0,"pellet_box_1")
pellet_box_1.item:setStackSize(20)
spawn("floor_trigger",5,19,1,0,"floor_trigger_2")
floor_trigger_2.floortrigger:setTriggeredByParty(true)
floor_trigger_2.floortrigger:setTriggeredByMonster(true)
floor_trigger_2.floortrigger:setTriggeredByItem(true)
floor_trigger_2.floortrigger:setTriggeredByDigging(false)
floor_trigger_2.floortrigger:setDisableSelf(false)
floor_trigger_2.floortrigger:addConnector("onActivate", "dungeon_door_iron_barred_3", "open")
spawn("dungeon_door_iron_barred",7,18,2,0,"dungeon_door_iron_barred_3")
spawn("skeleton_trooper1",8,17,2,0,"skeleton_trooper1_2")
spawn("skeleton_trooper1",6,17,3,0,"skeleton_trooper1_3")
spawn("iron_key",8,17,1,0,"iron_key_5")
spawn("dungeon_secret_button_small",22,3,2,0,"dungeon_secret_button_small_3")
dungeon_secret_button_small_3.button:setDisableSelf(false)
dungeon_secret_button_small_3.button:addConnector("onActivate", "dungeon_secret_door_2", "open")
spawn("iron_key",8,17,1,0,"iron_key_6")
spawn("dungeon_stairs_down",24,16,2,0,"dungeon_stairs_down_4")
dungeon_stairs_down_4.stairs:setTeleportTarget(7,19,11,0)

--- level 7 ---

newMap{
	name = "Underground level 2",
	width = 32,
	height = 32,
	levelCoord = {0,0,2},
	ambientTrack = "mine",
	tiles = {
		"mine_floor",
		"mine_floor_crystal",
		"mine_wall",
		"mine_wall_crystal",
	}
}

loadLayer("tiles", {
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,2,4,4,2,4,2,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,2,2,2,2,4,4,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,2,4,4,4,4,4,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,2,4,4,4,4,4,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,2,2,2,2,2,4,4,4,4,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,2,4,4,4,4,2,4,2,4,4,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,2,2,2,2,2,2,4,2,4,4,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,2,4,4,4,4,2,4,2,4,4,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,2,4,4,4,4,2,2,2,4,4,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,2,2,2,4,4,4,4,4,4,4,4,4,4,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,4,4,4,4,
	4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,3,1,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
	4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
})

spawn("mine_stairs_up",1,9,3,0,"mine_stairs_up_1")
mine_stairs_up_1.stairs:setTeleportTarget(6,23,3,0)
spawn("mine_door_camo",11,8,0,0,"mine_door_camo_1")
mine_door_camo_1.door:setPullChain(true)
spawn("mine_stairs_up",19,10,0,0,"mine_stairs_up_3")
mine_stairs_up_3.stairs:setTeleportTarget(6,24,15,0)
spawn("rock",5,10,1,0,"rock_8")
spawn("rock",3,14,0,0,"rock_9")
spawn("rock",3,17,3,0,"rock_10")
spawn("potion_cure_poison",6,17,1,0,"potion_cure_poison_1")
potion_cure_poison_1.item:setStackSize(4)
spawn("mine_door_spear",19,14,3,0,"mine_door_spear_1")
spawn("mine_door_spear",20,15,3,0,"mine_door_spear_2")
spawn("lightning_rod",16,14,1,0,"lightning_rod_1")
spawn("beach_lock_round",19,13,3,0,"beach_lock_round_1")
beach_lock_round_1.lock:setOpenedBy("lock_pick")
beach_lock_round_1.lock:addConnector("onActivate", "mine_door_spear_1", "open")
spawn("mine_ceiling_shaft",19,18,0,0,"mine_ceiling_shaft_1")
mine_ceiling_shaft_1.null:disable()
spawn("teleporter",20,20,3,0,"teleporter_4")
teleporter_4.teleporter:setTeleportTarget(6,19,17,0)
teleporter_4.teleporter:setSpin("none")
teleporter_4.teleporter:setTriggeredByParty(true)
teleporter_4.teleporter:setTriggeredByMonster(true)
teleporter_4.teleporter:setTriggeredByItem(true)
teleporter_4.teleporter:setTriggeredBySpell(true)
spawn("secret",20,19,1,0,"secret_2")
spawn("floor_trigger",19,18,2,0,"floor_trigger_3")
floor_trigger_3.floortrigger:setTriggeredByParty(true)
floor_trigger_3.floortrigger:setTriggeredByMonster(true)
floor_trigger_3.floortrigger:setTriggeredByItem(true)
floor_trigger_3.floortrigger:setTriggeredByDigging(false)
floor_trigger_3.floortrigger:setDisableSelf(false)
floor_trigger_3.floortrigger:addConnector("onActivate", "secret_2", "activate")
spawn("mine_alcove",18,20,2,0,"mine_alcove_1")
spawn("archmage_mantle",18,20,2,0,"archmage_mantle_1")
mine_alcove_1.surface:addItem(archmage_mantle_1.item)
spawn("archmage_scapular",18,20,2,0,"archmage_scapular_1")
mine_alcove_1.surface:addItem(archmage_scapular_1.item)
spawn("mine_wall_01",19,20,3,0,"mine_wall_01_1")
spawn("nexus_key",6,17,3,0,"nexus_key_1")
spawn("leather_cuisse",22,15,3,0,"leather_cuisse_1")
spawn("leather_gloves",24,15,2,0,"leather_gloves_1")
spawn("mine_lever",19,14,1,0,"mine_lever_1")
mine_lever_1.lever:setDisableSelf(false)
mine_lever_1.lever:addConnector("onActivate", "mine_door_spear_2", "open")
mine_lever_1.lever:addConnector("onDeactivate", "mine_door_spear_2", "close")
spawn("leather_brigandine",23,15,0,0,"leather_brigandine_1")
spawn("spider",10,9,2,0,"spider_1")
spider_1.monster:setHealth(40)
spawn("spider",12,11,3,0,"spider_2")
spider_2.monster:setHealth(90)
spawn("spider",7,11,1,0,"spider_3")
spider_3.monster:setHealth(20)
spawn("spider",3,9,3,0,"spider_4")
spider_4.monster:setHealth(13)
spawn("spider",19,13,0,0,"spider_5")
spider_5.monster:setHealth(40)
spawn("mine_secret_door",9,6,2,0,"mine_secret_door_1")
spawn("mine_lever",10,5,2,0,"mine_lever_2")
mine_lever_2.lever:setDisableSelf(false)
mine_lever_2.lever:addConnector("onActivate", "mine_secret_door_1", "open")
mine_lever_2.lever:addConnector("onDeactivate", "mine_secret_door_1", "open")
spawn("ice_shards",10,5,3,0,"ice_shards_1")
spawn("mine_stairs_down",13,4,2,0,"mine_stairs_down_1")

--- level 8 ---

newMap{
	name = "Underground Level 3",
	width = 32,
	height = 32,
	levelCoord = {0,0,3},
	ambientTrack = "dungeon",
	tiles = {
		"dungeon_floor_tiles",
		"dungeon_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,1,1,1,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,2,1,2,2,2,2,2,1,2,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,
	2,1,1,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,1,2,1,2,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,2,2,2,2,2,2,
	2,1,2,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,1,2,2,2,1,2,2,1,1,2,1,1,2,2,2,2,2,1,1,1,2,2,1,2,2,2,2,2,2,2,2,
	2,1,2,2,2,1,2,2,2,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,
	2,1,1,1,2,1,2,2,2,1,2,1,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,1,2,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,1,1,2,2,2,2,2,1,2,2,1,2,1,2,2,2,1,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,1,1,2,2,2,2,2,1,2,2,1,2,1,2,2,2,1,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,2,2,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,1,2,2,1,1,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,1,2,2,2,2,2,1,2,1,1,1,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,2,1,2,1,2,2,2,2,2,2,
	2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,2,2,1,1,1,2,2,2,2,2,
	1,1,1,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,2,2,2,2,2,
	1,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,1,1,2,2,1,1,1,2,2,2,2,2,
	1,1,1,1,2,2,2,1,2,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,
	2,2,2,1,2,2,2,1,2,1,2,1,2,2,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,
	2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,2,1,2,1,2,1,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,1,2,1,1,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,2,2,1,1,1,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("torch_holder",11,13,0,0,"torch_holder_5")
torch_holder_5.controller:setHasTorch(true)
spawn("torch_holder",13,13,1,0,"torch_holder_6")
torch_holder_6.controller:setHasTorch(true)
spawn("torch_holder",13,15,1,0,"torch_holder_7")
torch_holder_7.controller:setHasTorch(true)
spawn("torch_holder",13,17,1,0,"torch_holder_8")
torch_holder_8.controller:setHasTorch(true)
spawn("torch_holder",12,18,2,0,"torch_holder_9")
torch_holder_9.controller:setHasTorch(true)
spawn("torch_holder",9,18,2,0,"torch_holder_10")
torch_holder_10.controller:setHasTorch(true)
spawn("torch_holder",7,18,2,0,"torch_holder_11")
torch_holder_11.controller:setHasTorch(true)
spawn("torch_holder",5,18,3,0,"torch_holder_12")
torch_holder_12.controller:setHasTorch(true)
spawn("torch_holder",5,16,3,0,"torch_holder_13")
torch_holder_13.controller:setHasTorch(true)
spawn("torch_holder",5,14,3,0,"torch_holder_14")
torch_holder_14.controller:setHasTorch(true)
spawn("torch_holder",6,13,0,0,"torch_holder_15")
torch_holder_15.controller:setHasTorch(true)
spawn("torch_holder",8,13,0,0,"torch_holder_16")
torch_holder_16.controller:setHasTorch(true)
spawn("torch_holder",4,11,0,0,"torch_holder_18")
torch_holder_18.controller:setHasTorch(true)
spawn("torch_holder",3,9,1,0,"torch_holder_19")
torch_holder_19.controller:setHasTorch(true)
spawn("torch_holder",2,9,0,0,"torch_holder_20")
torch_holder_20.controller:setHasTorch(true)
spawn("torch_holder",1,9,2,0,"torch_holder_21")
torch_holder_21.controller:setHasTorch(true)
spawn("torch_holder",1,8,3,0,"torch_holder_22")
torch_holder_22.controller:setHasTorch(true)
spawn("torch_holder",1,6,1,0,"torch_holder_23")
torch_holder_23.controller:setHasTorch(true)
spawn("torch_holder",1,4,3,0,"torch_holder_24")
torch_holder_24.controller:setHasTorch(true)
spawn("torch_holder",2,4,2,0,"torch_holder_25")
torch_holder_25.controller:setHasTorch(true)
spawn("torch_holder",2,3,3,0,"torch_holder_26")
torch_holder_26.controller:setHasTorch(true)
spawn("torch_holder",2,3,1,0,"torch_holder_27")
torch_holder_27.controller:setHasTorch(true)
spawn("torch_holder",3,2,2,0,"torch_holder_28")
torch_holder_28.controller:setHasTorch(true)
spawn("torch_holder",1,2,2,0,"torch_holder_29")
torch_holder_29.controller:setHasTorch(true)
spawn("torch_holder",1,1,3,0,"torch_holder_30")
torch_holder_30.controller:setHasTorch(true)
spawn("torch_holder",3,1,1,0,"torch_holder_31")
torch_holder_31.controller:setHasTorch(true)
spawn("torch_holder",5,2,2,0,"torch_holder_32")
torch_holder_32.controller:setHasTorch(true)
spawn("torch_holder",5,1,0,0,"torch_holder_33")
torch_holder_33.controller:setHasTorch(true)
spawn("torch_holder",7,1,0,0,"torch_holder_34")
torch_holder_34.controller:setHasTorch(true)
spawn("torch_holder",7,2,2,0,"torch_holder_35")
torch_holder_35.controller:setHasTorch(true)
spawn("torch_holder",9,2,2,0,"torch_holder_36")
torch_holder_36.controller:setHasTorch(true)
spawn("torch_holder",9,1,0,0,"torch_holder_37")
torch_holder_37.controller:setHasTorch(true)
spawn("torch_holder",11,1,0,0,"torch_holder_38")
torch_holder_38.controller:setHasTorch(true)
spawn("torch_holder",10,3,3,0,"torch_holder_39")
torch_holder_39.controller:setHasTorch(true)
spawn("torch_holder",11,3,2,0,"torch_holder_40")
torch_holder_40.controller:setHasTorch(true)
spawn("torch_holder",13,3,2,0,"torch_holder_41")
torch_holder_41.controller:setHasTorch(true)
spawn("torch_holder",15,3,2,0,"torch_holder_42")
torch_holder_42.controller:setHasTorch(true)
spawn("torch_holder",15,3,0,0,"torch_holder_43")
torch_holder_43.controller:setHasTorch(true)
spawn("torch_holder",14,2,1,0,"torch_holder_44")
torch_holder_44.controller:setHasTorch(true)
spawn("torch_holder",14,2,0,0,"torch_holder_46")
torch_holder_46.controller:setHasTorch(true)
spawn("torch_holder",13,1,1,0,"torch_holder_47")
torch_holder_47.controller:setHasTorch(true)
spawn("torch_holder",13,1,0,0,"torch_holder_48")
torch_holder_48.controller:setHasTorch(true)
spawn("torch_holder",9,4,1,0,"torch_holder_45")
torch_holder_45.controller:setHasTorch(true)
spawn("torch_holder",7,4,3,0,"torch_holder_49")
torch_holder_49.controller:setHasTorch(true)
spawn("torch_holder",7,5,2,0,"torch_holder_50")
torch_holder_50.controller:setHasTorch(true)
spawn("torch_holder",9,5,2,0,"torch_holder_51")
torch_holder_51.controller:setHasTorch(true)
spawn("torch_holder",11,7,3,0,"torch_holder_52")
torch_holder_52.controller:setHasTorch(true)
spawn("torch_holder",9,9,3,0,"torch_holder_54")
torch_holder_54.controller:setHasTorch(true)
spawn("torch_holder",9,10,2,0,"torch_holder_55")
torch_holder_55.controller:setHasTorch(true)
spawn("torch_holder",7,10,2,0,"torch_holder_56")
torch_holder_56.controller:setHasTorch(true)
spawn("torch_holder",5,9,3,0,"torch_holder_57")
torch_holder_57.controller:setHasTorch(true)
spawn("torch_holder",5,8,1,0,"torch_holder_58")
torch_holder_58.controller:setHasTorch(true)
spawn("torch_holder",5,7,3,0,"torch_holder_59")
torch_holder_59.controller:setHasTorch(true)
spawn("torch_holder",5,5,3,0,"torch_holder_60")
torch_holder_60.controller:setHasTorch(true)
spawn("torch_holder",4,6,0,0,"torch_holder_61")
torch_holder_61.controller:setHasTorch(true)
spawn("torch_holder",3,5,1,0,"torch_holder_62")
torch_holder_62.controller:setHasTorch(true)
spawn("torch_holder",4,4,2,0,"torch_holder_63")
torch_holder_63.controller:setHasTorch(true)
spawn("torch_holder",19,12,2,0,"torch_holder_64")
torch_holder_64.controller:setHasTorch(true)
spawn("torch_holder",21,12,1,0,"torch_holder_65")
torch_holder_65.controller:setHasTorch(true)
spawn("torch_holder",21,11,1,0,"torch_holder_66")
torch_holder_66.controller:setHasTorch(true)
spawn("torch_holder",21,10,1,0,"torch_holder_67")
torch_holder_67.controller:setHasTorch(true)
spawn("torch_holder",20,10,0,0,"torch_holder_68")
torch_holder_68.controller:setHasTorch(true)
spawn("torch_holder",19,11,3,0,"torch_holder_69")
torch_holder_69.controller:setHasTorch(true)
spawn("torch_holder",15,16,1,0,"torch_holder_70")
torch_holder_70.controller:setHasTorch(true)
spawn("torch_holder",15,14,3,0,"torch_holder_71")
torch_holder_71.controller:setHasTorch(true)
spawn("torch_holder",15,12,1,0,"torch_holder_72")
torch_holder_72.controller:setHasTorch(true)
spawn("torch_holder",15,11,3,0,"torch_holder_73")
torch_holder_73.controller:setHasTorch(true)
spawn("torch_holder",16,13,0,0,"torch_holder_74")
torch_holder_74.controller:setHasTorch(true)
spawn("torch_holder",17,13,2,0,"torch_holder_75")
torch_holder_75.controller:setHasTorch(true)
spawn("torch_holder",18,13,1,0,"torch_holder_76")
torch_holder_76.controller:setHasTorch(true)
spawn("torch_holder",18,14,2,0,"torch_holder_77")
torch_holder_77.controller:setHasTorch(true)
spawn("torch_holder",20,14,2,0,"torch_holder_78")
torch_holder_78.controller:setHasTorch(true)
spawn("torch_holder",21,14,1,0,"torch_holder_79")
torch_holder_79.controller:setHasTorch(true)
spawn("torch_holder",21,16,3,0,"torch_holder_80")
torch_holder_80.controller:setHasTorch(true)
spawn("torch_holder",21,16,1,0,"torch_holder_81")
torch_holder_81.controller:setHasTorch(true)
spawn("torch_holder",19,19,3,0,"torch_holder_82")
torch_holder_82.controller:setHasTorch(true)
spawn("torch_holder",20,19,2,0,"torch_holder_83")
torch_holder_83.controller:setHasTorch(true)
spawn("torch_holder",24,17,3,0,"torch_holder_84")
torch_holder_84.controller:setHasTorch(true)
spawn("torch_holder",26,17,1,0,"torch_holder_85")
torch_holder_85.controller:setHasTorch(true)
spawn("torch_holder",25,16,3,0,"torch_holder_86")
torch_holder_86.controller:setHasTorch(true)
spawn("torch_holder",25,15,1,0,"torch_holder_87")
torch_holder_87.controller:setHasTorch(true)
spawn("torch_holder",23,15,3,0,"torch_holder_88")
torch_holder_88.controller:setHasTorch(true)
spawn("torch_holder",23,16,2,0,"torch_holder_89")
torch_holder_89.controller:setHasTorch(true)
spawn("torch_holder",23,14,1,0,"torch_holder_90")
torch_holder_90.controller:setHasTorch(true)
spawn("torch_holder",23,12,3,0,"torch_holder_91")
torch_holder_91.controller:setHasTorch(true)
spawn("torch_holder",23,11,1,0,"torch_holder_92")
torch_holder_92.controller:setHasTorch(true)
spawn("torch_holder",23,10,3,0,"torch_holder_93")
torch_holder_93.controller:setHasTorch(true)
spawn("torch_holder",23,9,1,0,"torch_holder_94")
torch_holder_94.controller:setHasTorch(true)
spawn("torch_holder",22,8,0,0,"torch_holder_95")
torch_holder_95.controller:setHasTorch(true)
spawn("torch_holder",21,8,2,0,"torch_holder_96")
torch_holder_96.controller:setHasTorch(true)
spawn("torch_holder",20,8,2,0,"torch_holder_97")
torch_holder_97.controller:setHasTorch(true)
spawn("torch_holder",18,8,2,0,"torch_holder_98")
torch_holder_98.controller:setHasTorch(true)
spawn("torch_holder",18,7,0,0,"torch_holder_99")
torch_holder_99.controller:setHasTorch(true)
spawn("torch_holder",20,7,0,0,"torch_holder_100")
torch_holder_100.controller:setHasTorch(true)
spawn("torch_holder",26,8,1,0,"torch_holder_101")
torch_holder_101.controller:setHasTorch(true)
spawn("torch_holder",25,5,1,0,"torch_holder_102")
torch_holder_102.controller:setHasTorch(true)
spawn("torch_holder",22,5,2,0,"torch_holder_104")
torch_holder_104.controller:setHasTorch(true)
spawn("torch_holder",21,5,0,0,"torch_holder_105")
torch_holder_105.controller:setHasTorch(true)
spawn("torch_holder",24,3,2,0,"torch_holder_107")
torch_holder_107.controller:setHasTorch(true)
spawn("torch_holder",25,8,2,0,"torch_holder_109")
torch_holder_109.controller:setHasTorch(true)
spawn("torch_holder",24,8,0,0,"torch_holder_110")
torch_holder_110.controller:setHasTorch(true)
spawn("torch_holder",25,19,2,0,"torch_holder_111")
torch_holder_111.controller:setHasTorch(true)
spawn("torch_holder",22,26,0,0,"torch_holder_114")
torch_holder_114.controller:setHasTorch(true)
spawn("torch_holder",24,26,0,0,"torch_holder_115")
torch_holder_115.controller:setHasTorch(true)
spawn("torch_holder",18,26,1,0,"torch_holder_116")
torch_holder_116.controller:setHasTorch(true)
spawn("torch_holder",18,27,1,0,"torch_holder_117")
torch_holder_117.controller:setHasTorch(true)
spawn("torch_holder",16,26,0,0,"torch_holder_118")
torch_holder_118.controller:setHasTorch(true)
spawn("torch_holder",14,26,0,0,"torch_holder_120")
torch_holder_120.controller:setHasTorch(true)
spawn("torch_holder",12,26,0,0,"torch_holder_121")
torch_holder_121.controller:setHasTorch(true)
spawn("torch_holder",11,26,3,0,"torch_holder_122")
torch_holder_122.controller:setHasTorch(true)
spawn("torch_holder",11,27,2,0,"torch_holder_123")
torch_holder_123.controller:setHasTorch(true)
spawn("torch_holder",12,27,1,0,"torch_holder_124")
torch_holder_124.controller:setHasTorch(true)
spawn("torch_holder",12,28,2,0,"torch_holder_125")
torch_holder_125.controller:setHasTorch(true)
spawn("torch_holder",13,28,1,0,"torch_holder_126")
torch_holder_126.controller:setHasTorch(true)
spawn("torch_holder",9,25,3,0,"torch_holder_127")
torch_holder_127.controller:setHasTorch(true)
spawn("torch_holder",7,25,1,0,"torch_holder_128")
torch_holder_128.controller:setHasTorch(true)
spawn("torch_holder",8,24,2,0,"torch_holder_129")
torch_holder_129.controller:setHasTorch(true)
spawn("torch_holder",6,24,3,0,"torch_holder_130")
torch_holder_130.controller:setHasTorch(true)
spawn("torch_holder",5,22,0,0,"torch_holder_134")
torch_holder_134.controller:setHasTorch(true)
spawn("torch_holder",5,22,2,0,"torch_holder_135")
torch_holder_135.controller:setHasTorch(true)
spawn("torch_holder",1,20,0,0,"torch_holder_136")
torch_holder_136.controller:setHasTorch(true)
spawn("torch_holder",2,19,3,0,"torch_holder_137")
torch_holder_137.controller:setHasTorch(true)
spawn("torch_holder",1,18,2,0,"torch_holder_139")
torch_holder_139.controller:setHasTorch(true)
spawn("torch_holder",0,19,1,0,"torch_holder_140")
torch_holder_140.controller:setHasTorch(true)
spawn("dungeon_stairs_up",10,11,0,0,"dungeon_stairs_up_4")
dungeon_stairs_up_4.stairs:setTeleportTarget(6,2,16,0)
spawn("lock",5,13,0,0,"lock_5")
lock_5.lock:setOpenedBy("iron_key")
lock_5.lock:addConnector("onActivate", "dungeon_door_iron_5", "open")
spawn("dungeon_door_iron",5,13,3,0,"dungeon_door_iron_5")
spawn("daemon_head",3,9,0,0,"daemon_head_1")
spawn("lever",3,12,3,0,"lever_2")
lever_2.lever:setDisableSelf(true)
lever_2.lever:addConnector("onActivate", "script_entity_1", "SkullKeySpawn")
lever_2.lever:addConnector("onActivate", "spawner_1", "activate")
spawn("dungeon_alcove",3,11,3,0,"dungeon_alcove_4")
spawn("script_entity",19,1,0,0,"script_entity_1")
script_entity_1.script:setSource("function SkullKeySpawn()\
\9dungeon_alcove_4.surface:addItem(spawn(\"skull_key\").item)\
end")
spawn("dungeon_door_iron_barred",2,9,1,0,"dungeon_door_iron_barred_4")
spawn("skull_lock",3,10,3,0,"skull_lock_1")
skull_lock_1.lock:setOpenedBy("skull_key")
skull_lock_1.lock:addConnector("onActivate", "dungeon_door_iron_barred_4", "open")
spawn("dungeon_door_iron_barred",2,4,0,0,"dungeon_door_iron_barred_5")
spawn("floor_trigger",2,4,3,0,"floor_trigger_11")
floor_trigger_11.floortrigger:setTriggeredByParty(true)
floor_trigger_11.floortrigger:setTriggeredByMonster(false)
floor_trigger_11.floortrigger:setTriggeredByItem(false)
floor_trigger_11.floortrigger:setTriggeredByDigging(false)
floor_trigger_11.floortrigger:setDisableSelf(true)
floor_trigger_11.floortrigger:addConnector("onActivate", "dungeon_door_iron_barred_5", "open")
spawn("skeleton_trooper_pair",3,1,1,0,"skeleton_trooper_pair_4")
skeleton_trooper_pair_4.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",1,1,3,0,"skeleton_trooper_pair_5")
skeleton_trooper_pair_5.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",12,9,3,0,"skeleton_trooper_pair_6")
skeleton_trooper_pair_6.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",11,9,3,0,"skeleton_trooper_pair_7")
skeleton_trooper_pair_7.monstergroup:setLevel(2)
spawn("ice_guardian",12,8,3,0,"ice_guardian_7")
spawn("ice_guardian",12,7,3,0,"ice_guardian_8")
spawn("skull_key",11,8,0,0,"skull_key_1")
spawn("dungeon_door_iron_barred",10,8,3,0,"dungeon_door_iron_barred_6")
spawn("floor_trigger",9,8,0,0,"floor_trigger_12")
floor_trigger_12.floortrigger:setTriggeredByParty(true)
floor_trigger_12.floortrigger:setTriggeredByMonster(false)
floor_trigger_12.floortrigger:setTriggeredByItem(false)
floor_trigger_12.floortrigger:setTriggeredByDigging(false)
floor_trigger_12.floortrigger:setDisableSelf(true)
floor_trigger_12.floortrigger:addConnector("onActivate", "dungeon_door_iron_barred_6", "open")
spawn("lever",11,9,3,0,"lever_3")
lever_3.lever:setDisableSelf(false)
lever_3.lever:addConnector("onActivate", "dungeon_door_iron_barred_6", "open")
lever_3.lever:addConnector("onDeactivate", "dungeon_door_iron_barred_6", "close")
spawn("skull_lock",8,7,3,0,"skull_lock_2")
skull_lock_2.lock:setOpenedBy("skull_key")
skull_lock_2.lock:addConnector("onActivate", "dungeon_door_iron_barred_7", "open")
spawn("dungeon_door_iron_barred",8,6,2,0,"dungeon_door_iron_barred_7")
spawn("skull_key",9,5,0,0,"skull_key_2")
spawn("shuriken",9,5,3,0,"shuriken_1")
spawn("huntsman_cloak",7,4,2,0,"huntsman_cloak_1")
spawn("dungeon_door_iron_barred",8,4,0,0,"dungeon_door_iron_barred_8")
dungeon_door_iron_barred_8.door:setPullChain(true)
spawn("skeleton_trooper_pair",5,2,0,0,"skeleton_trooper_pair_8")
skeleton_trooper_pair_8.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",6,1,1,0,"skeleton_trooper_pair_9")
skeleton_trooper_pair_9.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",7,2,0,0,"skeleton_trooper_pair_10")
skeleton_trooper_pair_10.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",9,1,3,0,"skeleton_trooper_pair_11")
skeleton_trooper_pair_11.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",11,1,2,0,"skeleton_trooper_pair_12")
skeleton_trooper_pair_12.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",12,3,0,0,"skeleton_trooper_pair_13")
skeleton_trooper_pair_13.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",11,2,1,0,"skeleton_trooper_pair_14")
skeleton_trooper_pair_14.monstergroup:setLevel(3)
spawn("skeleton_trooper_pair",13,2,0,0,"skeleton_trooper_pair_15")
skeleton_trooper_pair_15.monstergroup:setLevel(2)
spawn("ice_guardian",10,2,3,0,"ice_guardian_9")
spawn("ice_guardian",8,1,2,0,"ice_guardian_10")
spawn("ice_guardian",7,1,2,0,"ice_guardian_11")
spawn("ice_guardian",10,1,1,0,"ice_guardian_12")
spawn("skeleton_trooper_pair",12,2,0,0,"skeleton_trooper_pair_16")
skeleton_trooper_pair_16.monstergroup:setLevel(2)
spawn("skeleton_trooper_pair",12,1,1,0,"skeleton_trooper_pair_17")
skeleton_trooper_pair_17.monstergroup:setLevel(2)
spawn("torch_holder",11,9,2,0,"torch_holder_17")
torch_holder_17.controller:setHasTorch(true)
spawn("dungeon_wall_01",23,22,0,0,"dungeon_wall_01_1")
spawn("dungeon_wall_01",23,21,2,0,"dungeon_wall_01_2")
spawn("wall_button",23,23,1,0,"wall_button_4")
wall_button_4.button:setDisableSelf(false)
wall_button_4.button:addConnector("onActivate", "dungeon_door_iron_barred_9", "open")
spawn("dungeon_door_iron_barred",23,24,0,0,"dungeon_door_iron_barred_9")
spawn("ice_guardian",22,27,0,0,"ice_guardian_13")
spawn("ice_guardian",23,27,3,0,"ice_guardian_14")
spawn("skeleton_trooper_pair",24,27,0,0,"skeleton_trooper_pair_18")
skeleton_trooper_pair_18.monstergroup:setLevel(2)
spawn("bone_blade",8,1,0,0,"bone_blade_1")
spawn("potion_greater_healing",8,1,1,0,"potion_greater_healing_3")
spawn("ice_lizard_steak",11,2,0,0,"ice_lizard_steak_13")
spawn("ice_lizard_steak",11,2,0,0,"ice_lizard_steak_14")
spawn("potion_cure_poison",9,1,3,0,"potion_cure_poison_2")
spawn("dungeon_alcove",15,3,1,0,"dungeon_alcove_5")
spawn("cube_key",15,3,1,0,"cube_key_1")
dungeon_alcove_5.surface:addItem(cube_key_1.item)
spawn("skull_lock",16,23,2,0,"skull_lock_3")
skull_lock_3.lock:setOpenedBy("skull_key")
spawn("dungeon_door_iron_barred",15,24,0,0,"dungeon_door_iron_barred_10")
spawn("ice_guardian",15,24,3,0,"ice_guardian_15")
spawn("ice_guardian",15,25,3,0,"ice_guardian_16")
spawn("cube_key",15,25,3,0,"cube_key_2")
ice_guardian_16.monster:addItem(cube_key_2.item)
spawn("dungeon_door_iron_barred",15,26,3,0,"dungeon_door_iron_barred_11")
spawn("dungeon_door_iron_barred",16,26,3,0,"dungeon_door_iron_barred_12")
spawn("wall_button",15,26,2,0,"wall_button_5")
wall_button_5.button:setDisableSelf(false)
wall_button_5.button:addConnector("onActivate", "dungeon_door_iron_barred_12", "open")
wall_button_5.button:addConnector("onActivate", "dungeon_door_iron_barred_11", "open")
spawn("skull_key",12,27,3,0,"skull_key_3")
spawn("cutlass",12,27,3,0,"cutlass_1")
spawn("cutlass",12,27,2,0,"cutlass_2")
spawn("heavy_shield",12,27,0,0,"heavy_shield_1")
spawn("meteor_cuirass",12,27,0,0,"meteor_cuirass_2")
spawn("meteor_cuisse",12,27,1,0,"meteor_cuisse_2")
spawn("full_helmet",12,27,3,0,"full_helmet_1")
spawn("ice_guardian",14,21,2,0,"ice_guardian_17")
ice_guardian_17.monster:setAIState("guard")
spawn("ice_guardian",14,22,2,0,"ice_guardian_18")
ice_guardian_18.monster:setAIState("guard")
spawn("dungeon_secret_button_large",12,22,0,0,"dungeon_secret_button_large_1")
dungeon_secret_button_large_1.button:setDisableSelf(false)
dungeon_secret_button_large_1.button:addConnector("onActivate", "dungeon_door_iron_barred_13", "open")
spawn("dungeon_door_iron_barred",12,23,0,0,"dungeon_door_iron_barred_13")
spawn("dungeon_door_iron_barred",11,21,2,0,"dungeon_door_iron_barred_14")
dungeon_door_iron_barred_14.door:setPullChain(true)
spawn("stormseed_orb",12,20,1,0,"stormseed_orb_2")
spawn("scroll_lightning_bolt",12,20,1,0,"scroll_lightning_bolt_1")
spawn("potion_willpower",12,20,1,0,"potion_willpower_1")
spawn("potion_willpower",12,20,1,0,"potion_willpower_2")
spawn("potion_willpower",12,20,1,0,"potion_willpower_3")
spawn("dungeon_door_iron_barred",8,23,0,0,"dungeon_door_iron_barred_15")
spawn("dungeon_door_iron_barred",9,21,2,0,"dungeon_door_iron_barred_16")
spawn("dungeon_door_iron_barred",10,22,2,0,"dungeon_door_iron_barred_17")
spawn("dungeon_door_iron_barred",6,23,0,0,"dungeon_door_iron_barred_18")
spawn("dungeon_door_iron_barred",7,22,0,0,"dungeon_door_iron_barred_19")
spawn("wall_button",10,22,0,0,"wall_button_6")
wall_button_6.button:setDisableSelf(false)
wall_button_6.button:addConnector("onActivate", "dungeon_door_iron_barred_17", "open")
spawn("wall_button",8,22,0,0,"wall_button_7")
wall_button_7.button:setDisableSelf(false)
wall_button_7.button:addConnector("onActivate", "dungeon_door_iron_barred_15", "open")
spawn("wall_button",6,22,0,0,"wall_button_8")
wall_button_8.button:setDisableSelf(false)
wall_button_8.button:addConnector("onActivate", "dungeon_door_iron_barred_18", "open")
spawn("wall_button",9,22,2,0,"wall_button_9")
wall_button_9.button:setDisableSelf(false)
wall_button_9.button:addConnector("onActivate", "dungeon_door_iron_barred_16", "open")
spawn("wall_button",7,22,2,0,"wall_button_10")
wall_button_10.button:setDisableSelf(false)
wall_button_10.button:addConnector("onActivate", "dungeon_door_iron_barred_19", "open")
spawn("skull",7,25,0,0,"skull_1")
spawn("potion_vitality",7,25,2,0,"potion_vitality_2")
spawn("potion_cure_poison",7,25,3,0,"potion_cure_poison_3")
spawn("dungeon_wall_01",3,21,0,0,"dungeon_wall_01_3")
spawn("dungeon_wall_01",3,20,2,0,"dungeon_wall_01_4")
spawn("lock_tomb",26,17,0,0,"lock_tomb_1")
lock_tomb_1.lock:setOpenedBy("cube_key")
lock_tomb_1.lock:addConnector("onActivate", "dungeon_door_wooden_1", "open")
spawn("lock_tomb",24,15,0,0,"lock_tomb_2")
lock_tomb_2.lock:setOpenedBy("cube_key")
lock_tomb_2.lock:addConnector("onActivate", "dungeon_door_wooden_2", "open")
spawn("dungeon_door_wooden",25,16,2,0,"dungeon_door_wooden_1")
spawn("dungeon_door_wooden",23,14,2,0,"dungeon_door_wooden_2")
spawn("dungeon_door_wooden",23,8,3,0,"dungeon_door_wooden_3")
dungeon_door_wooden_3.door:setPullChain(true)
spawn("dungeon_breakable_wall",24,3,3,0,"dungeon_breakable_wall_1")
spawn("dungeon_stairs_down",25,3,1,0,"dungeon_stairs_down_3")
dungeon_stairs_down_3.stairs:setTeleportTarget(9,2,2,0)
spawn("spawner",3,9,2,0,"spawner_1")
spawner_1.spawner:setSpawnedEntity("fireball_large")
spawner_1.spawner:setMonsterLevel(1)
spawner_1.spawner:setCooldown(0)
spawner_1.spawner:setDisableSelf(false)
spawn("daemon_head",20,5,3,0,"daemon_head_2")
spawn("daemon_head",23,2,0,0,"daemon_head_3")
spawn("spawner",20,5,1,0,"spawner_2")
spawner_2.spawner:setSpawnedEntity("fireball_large")
spawner_2.spawner:setMonsterLevel(1)
spawner_2.spawner:setCooldown(14)
spawner_2.spawner:setDisableSelf(false)
spawn("spawner",23,2,2,0,"spawner_3")
spawner_3.spawner:setSpawnedEntity("fireball_large")
spawner_3.spawner:setMonsterLevel(1)
spawner_3.spawner:setCooldown(0)
spawner_3.spawner:setDisableSelf(false)
spawn("floor_trigger",23,5,0,0,"floor_trigger_13")
floor_trigger_13.floortrigger:setTriggeredByParty(true)
floor_trigger_13.floortrigger:setTriggeredByMonster(true)
floor_trigger_13.floortrigger:setTriggeredByItem(true)
floor_trigger_13.floortrigger:setTriggeredByDigging(false)
floor_trigger_13.floortrigger:setDisableSelf(true)
floor_trigger_13.floortrigger:addConnector("onActivate", "spawner_3", "activate")
spawn("floor_trigger",24,5,0,0,"floor_trigger_14")
floor_trigger_14.floortrigger:setTriggeredByParty(true)
floor_trigger_14.floortrigger:setTriggeredByMonster(true)
floor_trigger_14.floortrigger:setTriggeredByItem(true)
floor_trigger_14.floortrigger:setTriggeredByDigging(false)
floor_trigger_14.floortrigger:setDisableSelf(true)
floor_trigger_14.floortrigger:addConnector("onActivate", "spawner_2", "activate")

--- level 9 ---

newMap{
	name = "Underground Level 4",
	width = 32,
	height = 32,
	levelCoord = {0,0,4},
	ambientTrack = "dungeon",
	tiles = {
		"dungeon_floor_tiles",
		"dungeon_wall",
	}
}

loadLayer("tiles", {
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,1,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,1,1,1,2,2,1,2,2,1,1,1,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,
	2,2,1,2,2,1,2,2,1,2,1,1,2,1,1,2,1,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,
	2,1,1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,2,1,2,2,2,2,2,2,2,2,2,
	2,2,1,2,2,1,2,2,1,2,1,1,2,1,1,2,1,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,2,2,1,2,2,1,1,1,2,2,1,2,2,2,1,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,1,2,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,2,2,1,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,1,1,2,1,2,1,1,2,2,1,2,2,1,2,2,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,1,1,2,1,1,1,1,1,2,2,1,2,2,1,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,2,2,1,2,2,1,2,2,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,1,2,2,1,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,2,2,1,2,2,1,1,1,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,1,2,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,1,1,2,2,1,2,2,1,2,2,1,1,1,1,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,1,2,2,1,2,2,1,2,2,2,2,2,2,2,2,
	2,2,1,1,1,1,1,1,1,2,1,1,2,2,1,2,2,1,2,2,1,1,2,1,2,2,2,2,2,2,2,2,
	2,2,2,2,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1,1,2,2,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,2,1,1,2,2,2,1,2,1,2,1,2,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,2,2,1,2,2,2,2,1,2,2,2,1,1,1,1,1,2,2,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,
	2,2,2,2,1,2,1,2,1,2,1,2,1,2,1,2,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,1,2,1,2,1,2,1,2,1,2,1,2,2,1,2,2,1,2,2,2,2,2,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,
})

spawn("dungeon_wall_01",4,31,2,0,"dungeon_wall_01_5")
spawn("dungeon_wall_01",5,31,2,0,"dungeon_wall_01_6")
spawn("dungeon_wall_01",6,31,2,0,"dungeon_wall_01_7")
spawn("dungeon_wall_01",7,31,2,0,"dungeon_wall_01_8")
spawn("dungeon_wall_01",8,31,2,0,"dungeon_wall_01_9")
spawn("dungeon_wall_01",9,31,2,0,"dungeon_wall_01_10")
spawn("dungeon_wall_01",10,31,2,0,"dungeon_wall_01_11")
spawn("dungeon_wall_01",11,31,2,0,"dungeon_wall_01_12")
spawn("dungeon_wall_01",12,31,2,0,"dungeon_wall_01_13")
spawn("dungeon_wall_01",13,31,2,0,"dungeon_wall_01_14")
spawn("dungeon_wall_01",14,31,2,0,"dungeon_wall_01_15")
spawn("dungeon_wall_01",15,31,2,0,"dungeon_wall_01_16")
spawn("dungeon_wall_01",16,31,2,0,"dungeon_wall_01_17")
spawn("dungeon_wall_01",17,31,2,0,"dungeon_wall_01_18")
spawn("dungeon_wall_01",18,31,2,0,"dungeon_wall_01_19")
spawn("dungeon_wall_01",19,31,2,0,"dungeon_wall_01_20")
spawn("dungeon_wall_01",20,31,2,0,"dungeon_wall_01_21")
spawn("dungeon_stairs_up",1,2,3,0,"dungeon_stairs_up_5")
dungeon_stairs_up_5.stairs:setTeleportTarget(8,24,3,0)
spawn("torch_holder",3,3,3,0,"torch_holder_53")
torch_holder_53.controller:setHasTorch(true)
spawn("torch_holder",5,4,0,0,"torch_holder_106")
torch_holder_106.controller:setHasTorch(true)
spawn("torch_holder",8,7,1,0,"torch_holder_112")
torch_holder_112.controller:setHasTorch(true)
spawn("torch_holder",11,5,2,0,"torch_holder_113")
torch_holder_113.controller:setHasTorch(true)
spawn("torch_holder",13,4,1,0,"torch_holder_119")
torch_holder_119.controller:setHasTorch(true)
spawn("torch_holder",15,6,2,0,"torch_holder_131")
torch_holder_131.controller:setHasTorch(true)
spawn("torch_holder",16,8,1,0,"torch_holder_132")
torch_holder_132.controller:setHasTorch(true)
spawn("torch_holder",17,10,2,0,"torch_holder_133")
torch_holder_133.controller:setHasTorch(true)
spawn("torch_holder",17,13,1,0,"torch_holder_138")
torch_holder_138.controller:setHasTorch(true)
spawn("torch_holder",18,14,2,0,"torch_holder_141")
torch_holder_141.controller:setHasTorch(true)
spawn("torch_holder",18,19,2,0,"torch_holder_142")
torch_holder_142.controller:setHasTorch(true)
spawn("torch_holder",15,20,2,0,"torch_holder_143")
torch_holder_143.controller:setHasTorch(true)
spawn("torch_holder",14,22,3,0,"torch_holder_144")
torch_holder_144.controller:setHasTorch(true)
spawn("torch_holder",12,24,2,0,"torch_holder_145")
torch_holder_145.controller:setHasTorch(true)
spawn("torch_holder",12,28,3,0,"torch_holder_146")
torch_holder_146.controller:setHasTorch(true)
spawn("torch_holder",8,28,3,0,"torch_holder_147")
torch_holder_147.controller:setHasTorch(true)
spawn("torch_holder",8,30,3,0,"torch_holder_148")
torch_holder_148.controller:setHasTorch(true)
spawn("torch_holder",5,29,2,0,"torch_holder_149")
torch_holder_149.controller:setHasTorch(true)
spawn("torch_holder",4,24,3,0,"torch_holder_150")
torch_holder_150.controller:setHasTorch(true)
spawn("torch_holder",5,23,0,0,"torch_holder_151")
torch_holder_151.controller:setHasTorch(true)
spawn("torch_holder",7,23,2,0,"torch_holder_152")
torch_holder_152.controller:setHasTorch(true)
spawn("torch_holder",8,24,1,0,"torch_holder_153")
torch_holder_153.controller:setHasTorch(true)
spawn("torch_holder",18,27,1,0,"torch_holder_154")
torch_holder_154.controller:setHasTorch(true)
spawn("torch_holder",16,28,3,0,"torch_holder_155")
torch_holder_155.controller:setHasTorch(true)
spawn("torch_holder",20,30,1,0,"torch_holder_156")
torch_holder_156.controller:setHasTorch(true)
spawn("torch_holder",21,27,2,0,"torch_holder_157")
torch_holder_157.controller:setHasTorch(true)
spawn("torch_holder",23,24,2,0,"torch_holder_158")
torch_holder_158.controller:setHasTorch(true)
spawn("torch_holder",23,17,1,0,"torch_holder_159")
torch_holder_159.controller:setHasTorch(true)
spawn("torch_holder",23,14,0,0,"torch_holder_160")
torch_holder_160.controller:setHasTorch(true)
spawn("torch_holder",22,12,3,0,"torch_holder_161")
torch_holder_161.controller:setHasTorch(true)
spawn("dungeon_door_portcullis",2,2,3,0,"dungeon_door_portcullis_3")
dungeon_door_portcullis_3.door:setDoorState("open")
spawn("dungeon_pressure_plate_dirt_floor",3,2,1,0,"dungeon_pressure_plate_dirt_floor_4")
dungeon_pressure_plate_dirt_floor_4.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_dirt_floor_4.floortrigger:setTriggeredByMonster(false)
dungeon_pressure_plate_dirt_floor_4.floortrigger:setTriggeredByItem(false)
dungeon_pressure_plate_dirt_floor_4.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_dirt_floor_4.floortrigger:setDisableSelf(true)
dungeon_pressure_plate_dirt_floor_4.floortrigger:addConnector("onActivate", "dungeon_door_portcullis_3", "close")
spawn("dungeon_wall_01",6,6,3,0,"dungeon_wall_01_22")
spawn("dungeon_wall_01",5,6,1,0,"dungeon_wall_01_23")
spawn("gear_key",5,5,2,0,"gear_key_1")
spawn("skull",6,10,0,0,"skull_2")
spawn("invisible_teleporter",10,6,2,0,"invisible_teleporter_1")
invisible_teleporter_1.teleporter:setTeleportTarget(9,10,6,0)
invisible_teleporter_1.teleporter:setSpin("turn_right")
invisible_teleporter_1.teleporter:setTriggeredByParty(true)
invisible_teleporter_1.teleporter:setTriggeredByMonster(true)
invisible_teleporter_1.teleporter:setTriggeredByItem(true)
invisible_teleporter_1.teleporter:setTriggeredBySpell(true)
spawn("invisible_teleporter",12,8,2,0,"invisible_teleporter_2")
invisible_teleporter_2.teleporter:setTeleportTarget(9,12,8,0)
invisible_teleporter_2.teleporter:setSpin("turn_right")
invisible_teleporter_2.teleporter:setTriggeredByParty(true)
invisible_teleporter_2.teleporter:setTriggeredByMonster(true)
invisible_teleporter_2.teleporter:setTriggeredByItem(true)
invisible_teleporter_2.teleporter:setTriggeredBySpell(true)
spawn("invisible_teleporter",14,6,0,0,"invisible_teleporter_3")
invisible_teleporter_3.teleporter:setTeleportTarget(9,14,6,0)
invisible_teleporter_3.teleporter:setSpin("turn_right")
invisible_teleporter_3.teleporter:setTriggeredByParty(true)
invisible_teleporter_3.teleporter:setTriggeredByMonster(true)
invisible_teleporter_3.teleporter:setTriggeredByItem(true)
invisible_teleporter_3.teleporter:setTriggeredBySpell(true)
spawn("invisible_teleporter",12,4,2,0,"invisible_teleporter_4")
invisible_teleporter_4.teleporter:setTeleportTarget(9,12,4,0)
invisible_teleporter_4.teleporter:setSpin("turn_right")
invisible_teleporter_4.teleporter:setTriggeredByParty(true)
invisible_teleporter_4.teleporter:setTriggeredByMonster(true)
invisible_teleporter_4.teleporter:setTriggeredByItem(true)
invisible_teleporter_4.teleporter:setTriggeredBySpell(true)
spawn("dungeon_door_iron_barred",15,25,0,0,"dungeon_door_iron_barred_20")
spawn("dungeon_door_iron_barred",17,25,0,0,"dungeon_door_iron_barred_21")
spawn("dungeon_door_iron_barred",19,25,0,0,"dungeon_door_iron_barred_22")
spawn("lock_gear",14,24,2,0,"lock_gear_1")
lock_gear_1.lock:setOpenedBy("gear_key")
lock_gear_1.lock:addConnector("onActivate", "dungeon_door_iron_barred_20", "open")
spawn("lock_gear",16,24,2,0,"lock_gear_2")
lock_gear_2.lock:setOpenedBy("gear_key")
lock_gear_2.lock:addConnector("onActivate", "dungeon_door_iron_barred_21", "open")
spawn("lock_gear",18,24,2,0,"lock_gear_3")
lock_gear_3.lock:setOpenedBy("gear_key")
lock_gear_3.lock:addConnector("onActivate", "dungeon_door_iron_barred_22", "open")
spawn("dungeon_pressure_plate",16,27,2,0,"dungeon_pressure_plate_1")
dungeon_pressure_plate_1.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_1.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_1.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_1.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_1.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_1.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",17,27,0,0,"dungeon_pressure_plate_2")
dungeon_pressure_plate_2.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_2.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_2.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_2.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_2.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_2.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",18,27,0,0,"dungeon_pressure_plate_3")
dungeon_pressure_plate_3.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_3.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_3.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_3.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_3.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_3.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",18,28,0,0,"dungeon_pressure_plate_4")
dungeon_pressure_plate_4.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_4.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_4.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_4.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_4.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_4.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",16,28,2,0,"dungeon_pressure_plate_5")
dungeon_pressure_plate_5.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_5.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_5.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_5.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_5.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_5.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",17,28,0,0,"dungeon_pressure_plate_6")
dungeon_pressure_plate_6.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_6.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_6.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_6.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_6.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_6.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",17,29,0,0,"dungeon_pressure_plate_7")
dungeon_pressure_plate_7.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_7.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_7.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_7.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_7.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_7.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",16,29,1,0,"dungeon_pressure_plate_8")
dungeon_pressure_plate_8.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_8.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_8.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_8.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_8.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_8.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("dungeon_pressure_plate",18,29,0,0,"dungeon_pressure_plate_9")
dungeon_pressure_plate_9.floortrigger:setTriggeredByParty(true)
dungeon_pressure_plate_9.floortrigger:setTriggeredByMonster(true)
dungeon_pressure_plate_9.floortrigger:setTriggeredByItem(true)
dungeon_pressure_plate_9.floortrigger:setTriggeredByDigging(false)
dungeon_pressure_plate_9.floortrigger:setDisableSelf(false)
dungeon_pressure_plate_9.floortrigger:addConnector("onToggle", "script_entity_2", "xpadToggle")
spawn("script_entity",25,25,1,0,"script_entity_2")
script_entity_2.script:setSource("function xpadToggle()\
\9local p1 = dungeon_pressure_plate_1.floortrigger:isActivated() \
\9local p2 = dungeon_pressure_plate_2.floortrigger:isDeactivated() \
\9local p3 = dungeon_pressure_plate_3.floortrigger:isActivated() \
\9local p4 = dungeon_pressure_plate_5.floortrigger:isDeactivated() \
\9local p5 = dungeon_pressure_plate_6.floortrigger:isActivated() \
\9local p6 = dungeon_pressure_plate_4.floortrigger:isDeactivated() \
\9local p7 = dungeon_pressure_plate_8.floortrigger:isActivated() \
\9local p8 = dungeon_pressure_plate_7.floortrigger:isDeactivated() \
\9local p9 = dungeon_pressure_plate_9.floortrigger:isActivated() \
\
\9if p1 and p2 and p3 and p4 and p5 and p6 and p7 and p8 and p9 then\
\9\9dungeon_door_iron_barred_23.door:open()\
\9end\
end\
")
spawn("dungeon_door_iron_barred",17,30,0,0,"dungeon_door_iron_barred_23")
spawn("green_slime",6,11,0,0,"green_slime_1")
green_slime_1.monster:setAIState("guard")
spawn("dungeon_door_iron_barred",6,11,2,0,"dungeon_door_iron_barred_24")
spawn("dungeon_door_iron_barred",12,11,0,0,"dungeon_door_iron_barred_25")
dungeon_door_iron_barred_25.door:setPullChain(true)
spawn("scroll_invisibility",17,19,1,0,"scroll_invisibility_2")
spawn("dungeon_door_iron_barred",17,24,0,0,"dungeon_door_iron_barred_26")
dungeon_door_iron_barred_26.door:setPullChain(true)
spawn("wall_button",15,25,3,0,"wall_button_11")
wall_button_11.button:setDisableSelf(false)
wall_button_11.button:addConnector("onActivate", "dungeon_door_iron_barred_20", "open")
spawn("wall_button",19,25,1,0,"wall_button_12")
wall_button_12.button:setDisableSelf(false)
wall_button_12.button:addConnector("onActivate", "dungeon_door_iron_barred_22", "open")
